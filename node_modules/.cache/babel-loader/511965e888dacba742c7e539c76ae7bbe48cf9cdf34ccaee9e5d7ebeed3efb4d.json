{"ast":null,"code":"import { slicedToArray as o, toConsumableArray as e, defineProperty as n } from \"../../../../_virtual/_rollupPluginBabelHelpers.js\";\nimport { jsx as a } from \"react/jsx-runtime\";\nimport i from \"classnames\";\nimport r, { forwardRef as t, useRef as c, useState as l, useMemo as s, useCallback as d } from \"react\";\nimport m from \"../../../hooks/useMergeRef.js\";\nimport u from \"./Accordion.module.scss.js\";\nvar p = t(function (t, p) {\n  var f = t.children,\n    v = void 0 === f ? null : f,\n    C = t.allowMultiple,\n    j = void 0 !== C && C,\n    b = t[\"data-testid\"],\n    g = void 0 === b ? \"monday-accordion\" : b,\n    h = t.defaultIndex,\n    x = void 0 === h ? [] : h,\n    y = t.className,\n    A = void 0 === y ? \"\" : y,\n    O = t.id,\n    k = c(null),\n    E = m(p, k),\n    I = l(x),\n    N = o(I, 2),\n    M = N[0],\n    P = N[1],\n    _ = s(function () {\n      return r.Children.toArray(v);\n    }, [v]),\n    w = d(function (o) {\n      return M.includes(o);\n    }, [M]),\n    B = d(function (o) {\n      if (j) {\n        var n = e(M);\n        if (w(o)) {\n          var a = n.indexOf(o);\n          a > -1 && n.splice(a, 1);\n        } else n.push(o);\n        P(n);\n      } else w(o) ? P([]) : P([o]);\n    }, [w, M, j]),\n    H = s(function () {\n      return r.Children.map(_, function (o, e) {\n        var a,\n          t,\n          c,\n          l = Object.assign({}, null == o ? void 0 : o.props),\n          s = (a = e, c = O, (t = l).id ? t.id : c ? \"\".concat(c, \"--item-\").concat(a) : \"\".concat(\"monday-accordion\", \"--item-\").concat(a));\n        return r.cloneElement(o, Object.assign(Object.assign({}, l), {\n          id: s,\n          onClickAccordionCallback: function () {\n            B(e);\n          },\n          open: w(e),\n          expandCollapseComponentClassName: i(u.accordionItemExpandCollapse, n({}, u.accordionItemExpandCollapseLast, e === _.length - 1))\n        }));\n      });\n    }, [_, O, w, B]);\n  return a(\"div\", Object.assign({\n    ref: E,\n    className: i(u.accordion, A),\n    \"data-testid\": g,\n    id: O\n  }, {\n    children: _ && H\n  }));\n});\nexport { p as default };","map":{"version":3,"names":["p","t","f","children","v","C","allowMultiple","j","b","g","h","defaultIndex","x","y","className","A","O","id","k","c","E","m","I","l","N","o","M","P","_","s","r","Children","toArray","w","d","includes","B","n","e","a","indexOf","splice","push","H","map","Object","assign","props","concat","cloneElement","onClickAccordionCallback","open","expandCollapseComponentClassName","i","u","accordionItemExpandCollapse","accordionItemExpandCollapseLast","length","ref","accordion","default"],"sources":["/Users/huynhmannguyen/Documents/GitHub/Huy_app/node_modules/monday-ui-react-core/src/components/Accordion/Accordion/Accordion.tsx"],"sourcesContent":["import cx from \"classnames\";\nimport React, { forwardRef, ReactElement, useCallback, useMemo, useRef, useState } from \"react\";\nimport useMergeRef from \"../../../hooks/useMergeRef\";\nimport { VibeComponent, VibeComponentProps } from \"../../../types\";\nimport styles from \"./Accordion.module.scss\";\n\nconst COMPONENT_ID = \"monday-accordion\";\n\nfunction defineChildId(index: number, props: { id: string }, accordionId: string) {\n  if (props.id) {\n    return props.id;\n  }\n  if (accordionId) {\n    return `${accordionId}--item-${index}`;\n  }\n  return `${COMPONENT_ID}--item-${index}`;\n}\n\ninterface AccordionProps extends VibeComponentProps {\n  /**\n   * List of AccordionItems\n   */\n  children?: Array<ReactElement> | ReactElement;\n  /**\n   * is allowed multiple opened accordion items\n   */\n  allowMultiple?: boolean;\n  /**\n   * Unique TestId - can be used as Selector for integration tests and other needs (tracking, etc.)\n   */\n  \"data-testid\"?: string;\n  /**\n   * Array of initial expanded indexes\n   */\n  defaultIndex?: Array<number>;\n}\n\nconst Accordion: VibeComponent<AccordionProps, unknown> & object = forwardRef(\n  (\n    {\n      children: originalChildren = null,\n      allowMultiple = false,\n      \"data-testid\": dataTestId = COMPONENT_ID,\n      defaultIndex = [],\n      className = \"\",\n      id\n    },\n    ref\n  ) => {\n    const componentRef = useRef(null);\n    const mergedRef = useMergeRef(ref, componentRef);\n\n    const [expandedItems, setExpandedItems] = useState(defaultIndex);\n\n    const children = useMemo(() => React.Children.toArray(originalChildren), [originalChildren]);\n\n    const isChildExpanded = useCallback(\n      (itemIndex: number) => {\n        return expandedItems.includes(itemIndex);\n      },\n      [expandedItems]\n    );\n\n    const onChildClick = useCallback(\n      (itemIndex: number) => {\n        if (allowMultiple) {\n          const newExpandedItems = [...expandedItems];\n          if (isChildExpanded(itemIndex)) {\n            const index = newExpandedItems.indexOf(itemIndex);\n            if (index > -1) {\n              newExpandedItems.splice(index, 1);\n            }\n          } else {\n            newExpandedItems.push(itemIndex);\n          }\n          setExpandedItems(newExpandedItems);\n          return;\n        }\n\n        if (isChildExpanded(itemIndex)) {\n          setExpandedItems([]);\n        } else {\n          setExpandedItems([itemIndex]);\n        }\n      },\n      [isChildExpanded, expandedItems, allowMultiple]\n    );\n\n    const renderChildElements = useMemo(() => {\n      return React.Children.map(children, (child: ReactElement, itemIndex) => {\n        const originalProps = { ...child?.props };\n        const childId = defineChildId(itemIndex, originalProps, id);\n        return React.cloneElement(child, {\n          ...originalProps,\n          id: childId,\n          onClickAccordionCallback: () => {\n            onChildClick(itemIndex);\n          },\n          open: isChildExpanded(itemIndex),\n          expandCollapseComponentClassName: cx(styles.accordionItemExpandCollapse, {\n            [styles.accordionItemExpandCollapseLast]: itemIndex === children.length - 1\n          })\n        });\n      });\n    }, [children, id, isChildExpanded, onChildClick]);\n\n    return (\n      <div ref={mergedRef} className={cx(styles.accordion, className)} data-testid={dataTestId} id={id}>\n        {children && renderChildElements}\n      </div>\n    );\n  }\n);\n\nexport default Accordion;\n"],"mappings":";;;;;;AAqCA,IA6EAA,CAAA,GA7EmEC,CAAA,CACjE,UAAAA,CAAA,EASED,CAAA;EACE,IAAAE,CAAA,GAAAD,CAAA,CARAE,QAAA;IAAUC,CAAA,QAAmB,MAAHF,CAAA,GAAG,OAAIA,CAAA;IAAAG,CAAA,GAAAJ,CAAA,CACjCK,aAAA;IAAAC,CAAA,QAAgB,MAAHF,CAAA,IAAQA,CAAA;IAAAG,CAAA,GAAAP,CAAA,CACrB;IAAeQ,CAAA,QAAa,MAAHD,CAAA,GApCV,qBAoCyBA,CAAA;IAAAE,CAAA,GAAAT,CAAA,CACxCU,YAAA;IAAAC,CAAA,QAAe,MAAHF,CAAA,GAAG,KAAEA,CAAA;IAAAG,CAAA,GAAAZ,CAAA,CACjBa,SAAA;IAAAC,CAAA,QAAY,MAAHF,CAAA,GAAG,KAAEA,CAAA;IACdG,CAAA,GAAEf,CAAA,CAAFgB,EAAA;IAIIC,CAAA,GAAeC,CAAA,CAAO;IACtBC,CAAA,GAAYC,CAAA,CAAYrB,CAAA,EAAKkB,CAAA;IAEnCI,CAAA,GAA0CC,CAAA,CAASX,CAAA;IAAaY,CAAA,GAAAC,CAAA,CAAAH,CAAA;IAAzDI,CAAA,GAAaF,CAAA;IAAEG,CAAA,GAAgBH,CAAA;IAEhCI,CAAA,GAAWC,CAAA,CAAQ;MAAA,OAAMC,CAAA,CAAMC,QAAA,CAASC,OAAA,CAAQ5B,CAAA;IAAA,GAAmB,CAACA,CAAA;IAEpE6B,CAAA,GAAkBC,CAAA,CACtB,UAACT,CAAA;MACC,OAAOC,CAAA,CAAcS,QAAA,CAASV,CAAA,CAChC;IAAA,GACA,CAACC,CAAA;IAGGU,CAAA,GAAeF,CAAA,CACnB,UAACT,CAAA;MACC,IAAIlB,CAAA,EAAJ;QACE,IAAM8B,CAAA,GAAgBC,CAAA,CAAOZ,CAAA;QAC7B,IAAIO,CAAA,CAAgBR,CAAA,GAAY;UAC9B,IAAMc,CAAA,GAAQF,CAAA,CAAiBG,OAAA,CAAQf,CAAA;UACnCc,CAAA,IAAS,KACXF,CAAA,CAAiBI,MAAA,CAAOF,CAAA,EAAO,EAElC;QAAA,OACCF,CAAA,CAAiBK,IAAA,CAAKjB,CAAA;QAExBE,CAAA,CAAiBU,CAAA,CAElB;MAAA,OAEGJ,CAAA,CAAgBR,CAAA,IAClBE,CAAA,CAAiB,MAEjBA,CAAA,CAAiB,CAACF,CAAA,EAErB;IAAA,GACD,CAACQ,CAAA,EAAiBP,CAAA,EAAenB,CAAA;IAG7BoC,CAAA,GAAsBd,CAAA,CAAQ;MAClC,OAAOC,CAAA,CAAMC,QAAA,CAASa,GAAA,CAAIhB,CAAA,EAAU,UAACH,CAAA,EAAqBa,CAAA;QACxD,IAlFeC,CAAA;UAAetC,CAAA;UAAuBkB,CAAA;UAkF/CI,CAAA,GAAqBsB,MAAA,CAAAC,MAAA,aAAArB,CAAA,YAAAA,CAAA,CAAOsB,KAAA;UAC5BlB,CAAA,IAnFSU,CAAA,GAmFeD,CAAA,EAnFuBnB,CAAA,GAmFGH,CAAA,GAnF1Bf,CAAA,GAmFWsB,CAAA,EAlFrCN,EAAA,GACDhB,CAAA,CAAMgB,EAAA,GAEXE,CAAA,GACF,GAAA6B,MAAA,CAAU7B,CAAA,EAAW,WAAA6B,MAAA,CAAUT,CAAA,IAEjC,GAAAS,MAAA,CATmB,oBASG,WAAAA,MAAA,CAAUT,CAAA;QA6E1B,OAAOT,CAAA,CAAMmB,YAAA,CAAaxB,CAAA,EACrBoB,MAAA,CAAAC,MAAA,CAAAD,MAAA,CAAAC,MAAA,KAAAvB,CAAA,GACH;UAAAN,EAAA,EAAIY,CAAA;UACJqB,wBAAA,EAA0B,SAAAA,CAAA;YACxBd,CAAA,CAAaE,CAAA,CACd;UAAA;UACDa,IAAA,EAAMlB,CAAA,CAAgBK,CAAA;UACtBc,gCAAA,EAAkCC,CAAA,CAAGC,CAAA,CAAOC,2BAAA,EAA2BlB,CAAA,CACpE,IAAAiB,CAAA,CAAOE,+BAAA,EAAkClB,CAAA,KAAcV,CAAA,CAAS6B,MAAA,GAAS;QAAA,GAGhF;MAAA,EACD;IAAA,GAAE,CAAC7B,CAAA,EAAUZ,CAAA,EAAIiB,CAAA,EAAiBG,CAAA;EAEnC,OACEG,CAAA,QAAAM,MAAA,CAAAC,MAAA;IAAKY,GAAA,EAAKtC,CAAA;IAAWN,SAAA,EAAWuC,CAAA,CAAGC,CAAA,CAAOK,SAAA,EAAW5C,CAAA;IAAyB,eAAAN,CAAA;IAAYQ,EAAA,EAAID;EAAA,GAC3F;IAAAb,QAAA,EAAAyB,CAAA,IAAYe;EAAA,GAGnB;AAAA;AAAA,SAAA3C,CAAA,IAAA4D,OAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}