{"ast":null,"code":"import { slicedToArray as t } from \"../../../_virtual/_rollupPluginBabelHelpers.js\";\nimport { jsx as r } from \"react/jsx-runtime\";\nimport e from \"classnames\";\nimport i, { forwardRef as s, useRef as o, useState as n, useCallback as a, useMemo as l } from \"react\";\nimport c from \"../../hooks/useMergeRef.js\";\nimport m from \"../../hooks/useKeyEvent/index.js\";\nimport { VirtualizedListItems as d } from \"./VirtualizedListItems/VirtualizedListItems.js\";\nimport { keyCodes as u, UP_DOWN_ARROWS as f } from \"../../constants/keyCodes.js\";\nimport { withStaticProps as p } from \"../../types/withStaticProps.js\";\nimport { ListWrapperComponentType as v } from \"./ListConstants.js\";\nimport { getTestId as b, ComponentDefaultTestId as j } from \"../../tests/testIds.js\";\nimport { ListContext as y } from \"./utils/ListContext.js\";\nimport { useListId as h, getListItemIndexById as L, getNextListItemIndex as I, getPrevListItemIndex as k, getListItemIdByIndex as x, getListItemComponentType as g } from \"./utils/ListUtils.js\";\nimport A from \"./List.module.scss.js\";\nvar O = s(function (s, p) {\n    var v = s.className,\n      R = s.id,\n      C = s.component,\n      P = void 0 === C ? O.components.UL : C,\n      V = s.children,\n      _ = s.ariaLabel,\n      D = s.ariaDescribedBy,\n      E = s[\"aria-controls\"],\n      N = s.renderOnlyVisibleItems,\n      U = void 0 !== N && N,\n      W = s.style,\n      z = s[\"data-testid\"],\n      B = o(null),\n      S = c(p, B),\n      T = o([]),\n      w = h(R),\n      F = n(0),\n      H = t(F, 2),\n      K = H[0],\n      M = H[1],\n      q = P,\n      G = a(function (t) {\n        var r;\n        M(L(T, t)), null === (r = null == B ? void 0 : B.current) || void 0 === r || r.setAttribute(\"aria-activedescendant\", t);\n      }, []),\n      J = a(function (t) {\n        if (!U) {\n          t.preventDefault();\n          var r = t.key === u.UP_ARROW,\n            e = void 0;\n          t.key === u.DOWN_ARROW && T.current.length > K + 1 ? e = I(K, T) : r && K > 0 && (e = k(K, T)), void 0 !== e && (G(x(T, e)), T.current[e].focus());\n        }\n      }, [K, U, G]);\n    m({\n      keys: f,\n      callback: J,\n      ref: B\n    });\n    var Q = l(function () {\n      var t = Array.isArray(V) ? V : [V];\n      return U ? t = r(d, {\n        children: t\n      }) : (T.current = T.current.slice(0, t.length), t = i.Children.map(t, function (t, r) {\n        if (!i.isValidElement(t)) return t;\n        var e = t.props.id || \"\".concat(w, \"-item-\").concat(r);\n        return i.cloneElement(t, {\n          ref: function (t) {\n            return T.current[r] = t;\n          },\n          tabIndex: K === r ? 0 : -1,\n          id: e,\n          component: g(P)\n        });\n      })), t;\n    }, [V, P, K, w, U]);\n    return r(y.Provider, Object.assign({\n      value: {\n        updateFocusedItem: G\n      }\n    }, {\n      children: r(q, Object.assign({\n        \"data-testid\": z || b(j.LIST, R),\n        ref: S,\n        style: W,\n        className: e(A.list, v),\n        id: w,\n        \"aria-label\": _,\n        \"aria-describedby\": D,\n        \"aria-controls\": E,\n        tabIndex: -1,\n        role: \"listbox\"\n      }, {\n        children: Q\n      }))\n    }));\n  }),\n  R = p(O, {\n    components: v\n  });\nexport { R as default };","map":{"version":3,"names":["O","s","p","v","className","R","id","C","component","P","components","UL","V","children","_","ariaLabel","D","ariaDescribedBy","E","N","renderOnlyVisibleItems","U","W","style","z","B","o","S","c","T","w","h","F","n","H","t","K","M","q","G","a","r","L","current","setAttribute","J","preventDefault","key","u","UP_ARROW","e","DOWN_ARROW","length","I","k","x","focus","m","keys","f","callback","ref","Q","l","Array","isArray","d","slice","i","Children","map","isValidElement","props","concat","cloneElement","tabIndex","g","y","Provider","Object","assign","value","updateFocusedItem","b","j","LIST","A","list","role","default"],"sources":["/Users/huynhmannguyen/Documents/GitHub/Huy_app/node_modules/monday-ui-react-core/src/components/List/List.tsx"],"sourcesContent":["import cx from \"classnames\";\nimport React, {\n  AriaAttributes,\n  CSSProperties,\n  forwardRef,\n  ReactElement,\n  useCallback,\n  useMemo,\n  useRef,\n  useState\n} from \"react\";\nimport useMergeRef from \"../../hooks/useMergeRef\";\nimport useKeyEvent from \"../../hooks/useKeyEvent\";\nimport { VirtualizedListItems } from \"./VirtualizedListItems/VirtualizedListItems\";\nimport { keyCodes, UP_DOWN_ARROWS } from \"../../constants/keyCodes\";\nimport { VibeComponent, withStaticProps, VibeComponentProps } from \"../../types\";\nimport { ListItemProps } from \"../ListItem/ListItem\";\nimport { ListTitleProps } from \"../ListTitle/ListTitle\";\nimport { ListWrapperComponentStringType, ListWrapperComponentType } from \"./ListConstants\";\nimport { ComponentDefaultTestId, getTestId } from \"../../tests/test-ids-utils\";\nimport { ListContext } from \"./utils/ListContext\";\nimport {\n  getListItemComponentType,\n  getListItemIdByIndex,\n  getListItemIndexById,\n  getNextListItemIndex,\n  getPrevListItemIndex,\n  useListId\n} from \"./utils/ListUtils\";\nimport styles from \"./List.module.scss\";\n\nexport interface ListProps extends VibeComponentProps {\n  /**\n   * the wrapping component to wrap the List Items [div, nav, ul, ol]\n   */\n  component?: ListWrapperComponentType | ListWrapperComponentStringType;\n  /**\n   * ARIA label string to describe to list\n   */\n  ariaLabel?: string;\n  /**\n   * ARIA described by string to reference an id to describe by\n   */\n  ariaDescribedBy?: string;\n  \"aria-controls\"?: AriaAttributes[\"aria-controls\"];\n  children?: ReactElement<ListItemProps | ListTitleProps> | ReactElement<ListItemProps | ListTitleProps>[];\n  /**\n   * Using virtualized list for rendering only the items which visible to the user in any given user (performance optimization)\n   */\n  renderOnlyVisibleItems?: boolean;\n  style?: CSSProperties;\n}\n\nconst List: VibeComponent<ListProps> & {\n  components?: typeof ListWrapperComponentType;\n} = forwardRef(\n  (\n    {\n      className,\n      id,\n      component = List.components.UL,\n      children,\n      ariaLabel,\n      ariaDescribedBy,\n      \"aria-controls\": ariaControls,\n      renderOnlyVisibleItems = false,\n      style,\n      \"data-testid\": dataTestId\n    },\n    ref\n  ) => {\n    const componentRef = useRef(null);\n    const mergedRef = useMergeRef(ref, componentRef);\n    const childrenRefs: React.MutableRefObject<HTMLElement[]> = useRef([]);\n\n    const overrideId = useListId(id);\n    const [focusIndex, setFocusIndex] = useState(0);\n    const Component = component;\n\n    const updateFocusedItem = useCallback((id: string) => {\n      setFocusIndex(getListItemIndexById(childrenRefs, id));\n      componentRef?.current?.setAttribute(\"aria-activedescendant\", id);\n    }, []);\n\n    const onUpDownArrows = useCallback(\n      (event: KeyboardEvent) => {\n        if (renderOnlyVisibleItems) {\n          return;\n        }\n        event.preventDefault();\n\n        const isUpKey = event.key === keyCodes.UP_ARROW;\n        const isDownKey = event.key === keyCodes.DOWN_ARROW;\n        let overrideFocusIndex = undefined;\n\n        if (isDownKey && focusIndex + 1 < childrenRefs.current.length) {\n          overrideFocusIndex = getNextListItemIndex(focusIndex, childrenRefs);\n        } else if (isUpKey && focusIndex > 0) {\n          overrideFocusIndex = getPrevListItemIndex(focusIndex, childrenRefs);\n        }\n        if (overrideFocusIndex !== undefined) {\n          updateFocusedItem(getListItemIdByIndex(childrenRefs, overrideFocusIndex));\n          childrenRefs.current[overrideFocusIndex].focus();\n        }\n      },\n      [focusIndex, renderOnlyVisibleItems, updateFocusedItem]\n    );\n\n    useKeyEvent({\n      keys: UP_DOWN_ARROWS,\n      callback: onUpDownArrows,\n      ref: componentRef\n    });\n\n    const overrideChildren = useMemo(() => {\n      let override: ReactElement | ReactElement[] = Array.isArray(children) ? children : [children];\n      if (renderOnlyVisibleItems) {\n        override = <VirtualizedListItems>{override}</VirtualizedListItems>;\n      } else {\n        childrenRefs.current = childrenRefs.current.slice(0, override.length);\n        override = React.Children.map(override, (child, index) => {\n          if (!React.isValidElement(child)) {\n            return child;\n          }\n\n          const id = (child.props as { id: string }).id || `${overrideId}-item-${index}`;\n          return React.cloneElement(child, {\n            // @ts-ignore not sure how to deal with ref here\n            ref: ref => (childrenRefs.current[index] = ref),\n            tabIndex: focusIndex === index ? 0 : -1,\n            id,\n            component: getListItemComponentType(component)\n          });\n        });\n      }\n\n      return override;\n    }, [children, component, focusIndex, overrideId, renderOnlyVisibleItems]);\n\n    return (\n      <ListContext.Provider value={{ updateFocusedItem }}>\n        <Component\n          data-testid={dataTestId || getTestId(ComponentDefaultTestId.LIST, id)}\n          ref={mergedRef}\n          style={style}\n          className={cx(styles.list, className)}\n          id={overrideId}\n          aria-label={ariaLabel}\n          aria-describedby={ariaDescribedBy}\n          aria-controls={ariaControls}\n          tabIndex={-1}\n          role=\"listbox\"\n        >\n          {overrideChildren}\n        </Component>\n      </ListContext.Provider>\n    );\n  }\n);\n\nexport default withStaticProps(List, {\n  components: ListWrapperComponentType\n});\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}