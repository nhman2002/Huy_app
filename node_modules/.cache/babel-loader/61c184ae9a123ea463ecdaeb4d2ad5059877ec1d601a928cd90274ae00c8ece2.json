{"ast":null,"code":"import n, { useMemo as r, useContext as o, useCallback as i } from \"react\";\nimport e from \"../../hooks/useEventListener/index.js\";\nimport { useLastNavigationDirection as t } from \"../Menu/Menu/hooks/useLastNavigationDirection.js\";\nimport { getDirectionMaps as u, getOppositeDirection as a, getOutmostElementInDirection as l, getNextElementToFocusInDirection as d } from \"./helper.js\";\nvar v = n.createContext(null),\n  s = function (n, s) {\n    var c = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {\n        disabled: !1\n      },\n      f = r(function () {\n        return u(n);\n      }, [n]),\n      b = o(v),\n      m = t(),\n      p = m.lastNavigationDirectionRef,\n      g = i(function () {\n        var n,\n          r = p.current;\n        if (r && !c.disabled) {\n          var o = a(r),\n            i = l(f, o);\n          null === (n = null == i ? void 0 : i.current) || void 0 === n || n.focus();\n        }\n      }, [f, c.disabled, p]);\n    e({\n      eventName: \"focus\",\n      callback: g,\n      ref: s\n    });\n    var N = i(function (n, r) {\n      var o, i;\n      if (!c.disabled) {\n        var e = d(f[r], n);\n        if (e) return null === (o = n.current) || void 0 === o || o.blur(), void (null === (i = e.current) || void 0 === i || i.focus());\n        null == b || b.onOutboundNavigation(s, r);\n      }\n    }, [f, b, s, c.disabled]);\n    return {\n      onOutboundNavigation: N\n    };\n  };\nexport { v as GridKeyboardNavigationContext, s as useGridKeyboardNavigationContext };","map":{"version":3,"names":["v","n","createContext","s","useGridKeyboardNavigationContext","c","arguments","length","disabled","f","r","u","b","o","m","t","p","lastNavigationDirectionRef","g","i","current","a","l","focus","e","eventName","callback","ref","N","d","blur","onOutboundNavigation","GridKeyboardNavigationContext"],"sources":["/Users/huynhmannguyen/Documents/GitHub/Huy_app/node_modules/monday-ui-react-core/src/components/GridKeyboardNavigationContext/GridKeyboardNavigationContext.ts"],"sourcesContent":["import React, { useContext, useCallback, useMemo } from \"react\";\nimport useEventListener from \"../../hooks/useEventListener\";\nimport { useLastNavigationDirection } from \"../Menu/Menu/hooks/useLastNavigationDirection\";\nimport {\n  getDirectionMaps,\n  getNextElementToFocusInDirection,\n  getOppositeDirection,\n  getOutmostElementInDirection\n} from \"./helper\";\nimport { NavDirections } from \"../../hooks/useFullKeyboardListeners\";\nimport { GridElementRef, GridKeyboardNavigationContextType, Position } from \"./GridKeyboardNavigationContextConstants\";\n\nexport const GridKeyboardNavigationContext = React.createContext<GridKeyboardNavigationContextType>(null);\n\n/**\n * @param {({topElement: MutableRefObject, bottomElement: MutableRefObject}|\n * {leftElement: MutableRefObject, rightElement: MutableRefObject})[]} positions - the positions of the navigable items\n * @param {*} wrapperRef - a reference for a wrapper element which contains all the referenced elements\n * @param options - { disabled: boolean }\n */\nexport const useGridKeyboardNavigationContext = (\n  positions: Position[],\n  wrapperRef: GridElementRef,\n  options: { disabled: boolean } = { disabled: false }\n) => {\n  const directionMaps = useMemo(() => getDirectionMaps(positions), [positions]);\n  const upperContext = useContext(GridKeyboardNavigationContext);\n  const { lastNavigationDirectionRef } = useLastNavigationDirection();\n\n  const onWrapperFocus = useCallback(() => {\n    const keyboardDirection = lastNavigationDirectionRef.current;\n    if (!keyboardDirection || options.disabled) {\n      return;\n    }\n    const oppositeDirection = getOppositeDirection(keyboardDirection);\n    const refToFocus = getOutmostElementInDirection(directionMaps, oppositeDirection);\n    refToFocus?.current?.focus();\n  }, [directionMaps, options.disabled, lastNavigationDirectionRef]);\n  useEventListener({ eventName: \"focus\", callback: onWrapperFocus, ref: wrapperRef });\n\n  const onOutboundNavigation = useCallback(\n    (elementRef: GridElementRef, direction: NavDirections) => {\n      if (options.disabled) return;\n      const maybeNextElement = getNextElementToFocusInDirection(directionMaps[direction], elementRef);\n      if (maybeNextElement) {\n        elementRef.current?.blur();\n        maybeNextElement.current?.focus();\n        return;\n      }\n      // nothing on that direction - try updating the upper context\n      upperContext?.onOutboundNavigation(wrapperRef, direction);\n    },\n    [directionMaps, upperContext, wrapperRef, options.disabled]\n  );\n  return { onOutboundNavigation };\n};\n"],"mappings":";;;;AAYO,IAAMA,CAAA,GAAgCC,CAAA,CAAMC,aAAA,CAAiD;EAQvFC,CAAA,GAAmC,SAAAC,CAC9CH,CAAA,EACAE,CAAA;IAEE,IADFE,CAAA,GAAAC,SAAA,CAAAC,MAAA,mBAAAD,SAAA,MAAAA,SAAA,CAAiC;QAAEE,QAAA,GAAU;MAAA;MAEvCC,CAAA,GAAgBC,CAAA,CAAQ;QAAA,OAAMC,CAAA,CAAiBV,CAAA;MAAA,GAAY,CAACA,CAAA;MAC5DW,CAAA,GAAeC,CAAA,CAAWb,CAAA;MAChCc,CAAA,GAAuCC,CAAA;MAA/BC,CAAA,GAA0BF,CAAA,CAA1BG,0BAAA;MAEFC,CAAA,GAAiBC,CAAA,CAAY;QAAA,IAAAlB,CAAA;UAC3BS,CAAA,GAAoBM,CAAA,CAA2BI,OAAA;QACrD,IAAKV,CAAA,KAAqBL,CAAA,CAAQG,QAAA,EAAlC;UAGA,IAAMK,CAAA,GAAoBQ,CAAA,CAAqBX,CAAA;YACzCS,CAAA,GAAaG,CAAA,CAA6Bb,CAAA,EAAeI,CAAA;UAC5C,UAAnBZ,CAAA,WAAAkB,CAAA,YAAAA,CAAA,CAAYC,OAAA,UAAO,MAAAnB,CAAA,IAAAA,CAAA,CAAEsB,KAAA,EAHpB;QAAA;MAIF,GAAE,CAACd,CAAA,EAAeJ,CAAA,CAAQG,QAAA,EAAUQ,CAAA;IACrCQ,CAAA,CAAiB;MAAEC,SAAA,EAAW;MAASC,QAAA,EAAUR,CAAA;MAAgBS,GAAA,EAAKxB;IAAA;IAEtE,IAAMyB,CAAA,GAAuBT,CAAA,CAC3B,UAAClB,CAAA,EAA4BS,CAAA;MAAA,IAAAG,CAAA,EAAAM,CAAA;MAC3B,KAAId,CAAA,CAAQG,QAAA,EAAZ;QACA,IAAMgB,CAAA,GAAmBK,CAAA,CAAiCpB,CAAA,CAAcC,CAAA,GAAYT,CAAA;QACpF,IAAIuB,CAAA,EAGF,OAFoB,UAApBX,CAAA,GAAAZ,CAAA,CAAWmB,OAAA,UAAS,MAAAP,CAAA,IAAAA,CAAA,CAAAiB,IAAA,UACM,UAA1BX,CAAA,GAAAK,CAAA,CAAiBJ,OAAA,UAAS,MAAAD,CAAA,IAAAA,CAAA,CAAAI,KAAA;QAI5B,QAAAX,CAAA,IAAAA,CAAA,CAAcmB,oBAAA,CAAqB5B,CAAA,EAAYO,CAAA,CARzB;MAAA;IASxB,GACA,CAACD,CAAA,EAAeG,CAAA,EAAcT,CAAA,EAAYE,CAAA,CAAQG,QAAA;IAEpD,OAAO;MAAEuB,oBAAA,EAAAH;IAAA,CACX;EAAA;AAAA,SAAA5B,CAAA,IAAAgC,6BAAA,EAAA7B,CAAA,IAAAC,gCAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}