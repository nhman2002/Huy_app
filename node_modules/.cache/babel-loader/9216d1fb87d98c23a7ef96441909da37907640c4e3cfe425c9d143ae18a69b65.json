{"ast":null,"code":"import { toConsumableArray as l } from \"../../../_virtual/_rollupPluginBabelHelpers.js\";\nimport { useCallback as o, useEffect as e } from \"react\";\nimport n from \"./useAnimationProps.js\";\nimport i from \"../../hooks/useKeyEvent/index.js\";\nimport { keyCodes as a } from \"../../constants/keyCodes.js\";\nvar t = [a.ESCAPE];\nfunction r(a) {\n  var r = a.instance,\n    s = a.show,\n    u = a.onClose,\n    d = a.alertDialog,\n    c = n(a.triggerElement, r),\n    m = o(function (l) {\n      !d && (null == r ? void 0 : r.$el.contains(document.activeElement)) && (l.stopPropagation(), null == u || u());\n    }, [d, null == r ? void 0 : r.$el, u]);\n  i({\n    callback: m,\n    capture: !0,\n    keys: t\n  }), e(function () {\n    var o, e, n;\n    if (r) {\n      var i,\n        a = null == r ? void 0 : r.$el.childNodes[1].animate;\n      if (s) null == r || r.show(), a && (null === (e = null == r ? void 0 : (o = r.$el.childNodes[1]).animate) || void 0 === e || (i = e).call.apply(i, [o].concat(l(c()))));else if (a) {\n        var t,\n          u = null === (n = null == r ? void 0 : r.$el.childNodes[1]) || void 0 === n ? void 0 : (t = n).animate.apply(t, l(c(!0)));\n        null == u || u.finished.then(function () {\n          return null == r ? void 0 : r.hide();\n        });\n      } else null == r || r.hide();\n    }\n  }, [s, r, c]);\n}\nexport { r as default };","map":{"version":3,"names":["t","a","ESCAPE","r","instance","s","show","u","onClose","d","alertDialog","c","n","triggerElement","m","o","l","$el","contains","document","activeElement","stopPropagation","i","callback","capture","keys","e","childNodes","animate","call","apply","concat","finished","then","hide","default"],"sources":["/Users/huynhmannguyen/Documents/GitHub/Huy_app/node_modules/monday-ui-react-core/src/components/Modal/useShowHideModal.ts"],"sourcesContent":["import React, { useCallback, useEffect } from \"react\";\nimport useAnimationProps from \"./useAnimationProps\";\nimport useKeyEvent from \"../../hooks/useKeyEvent/index\";\nimport { A11yDialogType } from \"./ModalHelper\";\nimport { keyCodes } from \"../../constants\";\n\nconst KEYS = [keyCodes.ESCAPE];\n\nexport default function useShowHideModal({\n  instance,\n  show,\n  triggerElement,\n  onClose,\n  alertDialog\n}: {\n  instance: A11yDialogType;\n  show: boolean;\n  triggerElement: Element;\n  onClose: () => void;\n  alertDialog: boolean;\n}) {\n  const getAnimationProps = useAnimationProps(triggerElement, instance);\n\n  const closeOnEsc = useCallback(\n    (event: React.KeyboardEvent) => {\n      if (!alertDialog && instance?.$el.contains(document.activeElement)) {\n        event.stopPropagation();\n        onClose?.();\n      }\n    },\n    [alertDialog, instance?.$el, onClose]\n  );\n\n  useKeyEvent({\n    callback: closeOnEsc,\n    capture: true,\n    keys: KEYS\n  });\n\n  // show/hide and animate the modal\n  useEffect(() => {\n    if (!instance) {\n      return;\n    }\n    const animate = instance?.$el.childNodes[1].animate;\n    if (show) {\n      instance?.show();\n      if (animate) instance?.$el.childNodes[1].animate?.(...getAnimationProps());\n    } else {\n      if (animate) {\n        const animation = instance?.$el.childNodes[1]?.animate(...getAnimationProps(true));\n        animation?.finished.then(() => instance?.hide());\n      } else {\n        instance?.hide();\n      }\n    }\n  }, [show, instance, getAnimationProps]);\n}\n"],"mappings":";;;;;AAMA,IAAMA,CAAA,GAAO,CAACC,CAAA,CAASC,MAAA;AAEC,SAAAC,EAAgBF,CAAA;EAYvC,IAXCE,CAAA,GAAQF,CAAA,CAARG,QAAA;IACAC,CAAA,GAAIJ,CAAA,CAAJK,IAAA;IAEAC,CAAA,GAAON,CAAA,CAAPO,OAAA;IACAC,CAAA,GAAWR,CAAA,CAAXS,WAAA;IAQMC,CAAA,GAAoBC,CAAA,CAVZX,CAAA,CAAdY,cAAA,EAU4DV,CAAA;IAEtDW,CAAA,GAAaC,CAAA,CACjB,UAACC,CAAA;MAAA,CACMP,CAAA,KAAe,QAAAN,CAAA,YAAAA,CAAA,CAAUc,GAAA,CAAIC,QAAA,CAASC,QAAA,CAASC,aAAA,OAClDJ,CAAA,CAAMK,eAAA,IACN,QAAAd,CAAA,IAAAA,CAAA,GAEH;IAAA,GACD,CAACE,CAAA,EAAa,QAAAN,CAAA,YAAAA,CAAA,CAAUc,GAAA,EAAKV,CAAA;EAG/Be,CAAA,CAAY;IACVC,QAAA,EAAUT,CAAA;IACVU,OAAA,GAAS;IACTC,IAAA,EAAMzB;EAAA,IAIR0B,CAAA,CAAU;IAAA,IAAAX,CAAA,EAAAW,CAAA,EAAAd,CAAA;IACR,IAAKT,CAAA,EAAL;MAGA,IACUmB,CAAA;QADJrB,CAAA,GAAU,QAAAE,CAAA,YAAAA,CAAA,CAAUc,GAAA,CAAIU,UAAA,CAAW,GAAGC,OAAA;MAC5C,IAAIvB,CAAA,EACF,QAAAF,CAAA,IAAAA,CAAA,CAAUG,IAAA,IACNL,CAAA,KAA4C,UAAnCyB,CAAA,WAAAvB,CAAA,aAAAY,CAAA,GAAAZ,CAAA,CAAUc,GAAA,CAAIU,UAAA,CAAW,IAAGC,OAAA,UAAO,MAAAF,CAAA,KAAAJ,CAAA,GAAAI,CAAA,EAAAG,IAAA,CAAAC,KAAA,CAAAR,CAAA,GAAAP,CAAA,EAAAgB,MAAA,CAAAf,CAAA,CAAML,CAAA,YAEtD,IAAIV,CAAA,EAAS;QAAA,IAAAD,CAAA;UACLO,CAAA,GAAyC,UAA7BK,CAAA,WAAAT,CAAA,YAAAA,CAAA,CAAUc,GAAA,CAAIU,UAAA,CAAW,YAAI,MAAAf,CAAA,aAAAZ,CAAA,GAAAY,CAAA,EAAAgB,OAAA,CAAOE,KAAA,CAAA9B,CAAA,EAAAgB,CAAA,CAAIL,CAAA,EAAkB;QAC5E,QAAAJ,CAAA,IAAAA,CAAA,CAAWyB,QAAA,CAASC,IAAA,CAAK;UAAA,OAAM,QAAA9B,CAAA,QAAQ,IAARA,CAAA,CAAU+B,IAAA;QAAA,EAC1C;MAAA,OACC,QAAA/B,CAAA,IAAAA,CAAA,CAAU+B,IAAA,EAVb;IAAA;EAaF,GAAE,CAAC7B,CAAA,EAAMF,CAAA,EAAUQ,CAAA,EACtB;AAAA;AAAA,SAAAR,CAAA,IAAAgC,OAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}