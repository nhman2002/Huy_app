{"ast":null,"code":"import { slicedToArray as e, defineProperty as i } from \"../../../_virtual/_rollupPluginBabelHelpers.js\";\nimport { jsx as t } from \"react/jsx-runtime\";\nimport { camelCase as o } from \"lodash-es\";\nimport { getStyle as r } from \"../../helpers/typesciptCssModulesHelper.js\";\nimport { getTestId as s, ComponentDefaultTestId as n } from \"../../tests/testIds.js\";\nimport a from \"classnames\";\nimport { useState as d, useRef as c, useCallback as l, useEffect as m, useMemo as p } from \"react\";\nimport { SwitchTransition as u, CSSTransition as f } from \"react-transition-group\";\nimport v from \"../../hooks/useEventListener/index.js\";\nimport b from \"../../hooks/useAfterFirstRender/index.js\";\nimport { NOOP as j } from \"../../utils/function-utils.js\";\nimport { backwardCompatibilityForProperties as h } from \"../../helpers/backwardCompatibilityForProperties.js\";\nimport { CounterSize as g, CounterColor as x, CounterType as A, getActualSize as E } from \"./CounterConstants.js\";\nimport { withStaticProps as C } from \"../../types/withStaticProps.js\";\nimport N from \"./Counter.module.scss.js\";\nvar k = C(function g(x) {\n  var A = x.counterClassName,\n    C = x.count,\n    k = void 0 === C ? 0 : C,\n    L = x.size,\n    O = void 0 === L ? g.sizes.LARGE : L,\n    w = x.kind,\n    y = void 0 === w ? g.kinds.FILL : w,\n    M = x.color,\n    R = void 0 === M ? g.colors.PRIMARY : M,\n    P = x.maxDigits,\n    z = void 0 === P ? 3 : P,\n    D = x.ariaLabeledBy,\n    F = void 0 === D ? \"\" : D,\n    I = x.ariaLabel,\n    T = void 0 === I ? \"\" : I,\n    B = x.id,\n    H = void 0 === B ? \"\" : B,\n    U = x.prefix,\n    _ = void 0 === U ? \"\" : U,\n    G = x.onMouseDown,\n    S = void 0 === G ? j : G,\n    Y = x.noAnimation,\n    q = void 0 !== Y && Y,\n    J = x[\"data-testid\"],\n    K = h([x.className, x.wrapperClassName], void 0),\n    Q = d(!1),\n    V = e(Q, 2),\n    W = V[0],\n    X = V[1],\n    Z = c(null),\n    $ = l(function () {\n      X(!0);\n    }, [X]),\n    ee = l(function () {\n      X(!1);\n    }, [X]);\n  v({\n    eventName: \"animationend\",\n    callback: ee,\n    ref: Z\n  });\n  var ie = b();\n  m(function () {\n    ie.current || $();\n  }, [k, ie, $]), m(function () {\n    z > 0 || console.error(\"Max digits must be a positive number\");\n  }, [z]);\n  var te = p(function () {\n      return a(N.counter, r(N, o(\"size-\" + E(O))), r(N, o(\"kind-\" + y)), r(N, o(\"color-\" + R)), i({}, N.withAnimation, W), A);\n    }, [O, y, R, W, A]),\n    oe = \"counter\" + (H ? \"-\".concat(H) : \"\"),\n    re = (null == k ? void 0 : (\"\" + k).length) > z ? \"\".concat(Math.pow(10, z) - 1, \"+\") : k + \"\",\n    se = t(\"span\", Object.assign({\n      id: oe,\n      \"data-testid\": J || s(n.COUNTER, H)\n    }, {\n      children: _ + re\n    }));\n  return t(\"span\", Object.assign({\n    className: K,\n    \"aria-label\": \"\".concat(T, \" \").concat(re),\n    \"aria-labelledby\": F,\n    onMouseDown: S\n  }, {\n    children: t(\"div\", Object.assign({\n      className: te,\n      \"aria-label\": re,\n      ref: Z\n    }, {\n      children: q ? se : t(u, Object.assign({\n        mode: \"out-in\"\n      }, {\n        children: t(f, Object.assign({\n          classNames: {\n            enter: N.fadeEnter,\n            enterActive: N.fadeEnterActive,\n            exit: N.fadeExit,\n            exitActive: N.fadeExitActive\n          },\n          addEndListener: function (e, i) {\n            e.addEventListener(\"transitionend\", i, !1);\n          }\n        }, {\n          children: t(\"span\", Object.assign({\n            id: oe,\n            \"data-testid\": J || s(n.COUNTER, H)\n          }, {\n            children: _ + re\n          }))\n        }), re)\n      }))\n    }))\n  }));\n}, {\n  sizes: g,\n  colors: x,\n  kinds: A\n});\nexport { k as default };","map":{"version":3,"names":["k","C","g","x","A","counterClassName","count","L","size","O","sizes","LARGE","w","kind","y","kinds","FILL","M","color","R","colors","PRIMARY","P","maxDigits","z","D","ariaLabeledBy","F","I","ariaLabel","T","B","id","H","U","prefix","_","G","onMouseDown","S","j","Y","noAnimation","q","J","K","h","className","wrapperClassName","Q","d","V","e","W","X","Z","c","$","l","ee","v","eventName","callback","ref","ie","b","m","current","console","error","te","p","a","N","counter","r","o","E","i","withAnimation","oe","concat","re","length","Math","pow","se","t","Object","assign","s","n","COUNTER","children","u","mode","f","classNames","enter","fadeEnter","enterActive","fadeEnterActive","exit","fadeExit","exitActive","fadeExitActive","addEndListener","addEventListener","default"],"sources":["/Users/huynhmannguyen/Documents/GitHub/Huy_app/node_modules/monday-ui-react-core/src/components/Counter/Counter.tsx"],"sourcesContent":["import { camelCase } from \"lodash-es\";\nimport { getStyle } from \"../../helpers/typesciptCssModulesHelper\";\nimport { ComponentDefaultTestId, getTestId } from \"../../tests/test-ids-utils\";\nimport cx from \"classnames\";\nimport React, { useCallback, useEffect, useMemo, useRef, useState } from \"react\";\nimport { CSSTransition, SwitchTransition } from \"react-transition-group\";\nimport VibeComponentProps from \"../../types/VibeComponentProps\";\nimport useEventListener from \"../../hooks/useEventListener\";\nimport useAfterFirstRender from \"../../hooks/useAfterFirstRender\";\nimport { NOOP } from \"../../utils/function-utils\";\nimport { backwardCompatibilityForProperties } from \"../../helpers/backwardCompatibilityForProperties\";\nimport { CounterColor, CounterSize, CounterType, getActualSize } from \"./CounterConstants\";\nimport { withStaticProps } from \"../../types\";\nimport styles from \"./Counter.module.scss\";\n\nexport interface CounterProps extends VibeComponentProps {\n  /** id to pass to the element */\n  id?: string;\n  /** element id to describe the counter accordingly */\n  ariaLabeledBy?: string;\n  /** Use className instead\n   * @deprecated\n   */\n  wrapperClassName?: string;\n  /** Custom class names to pass to the component wrapper */\n  className?: string;\n  /** Custom class names to pass to the component */\n  counterClassName?: string;\n  /** The numeric value of the counter */\n  count?: number;\n  /** Counter description */\n  ariaLabel?: string;\n  /** The size of the counter */\n  size?: CounterSize;\n  kind?: CounterType;\n  /** The color of the counter */\n  color?: CounterColor;\n  /** maximum number of digits to display (see relevant story) */\n  maxDigits?: number;\n  /** Text prepended to counter value */\n  prefix?: string;\n  /** Callback to be called when the counter is clicked. */\n  onMouseDown?: (event: React.MouseEvent<HTMLSpanElement>) => void;\n  /** Disables the component's animation */\n  noAnimation?: boolean;\n}\n\nconst Counter: React.FC<CounterProps> & {\n  sizes?: typeof CounterSize;\n  colors?: typeof CounterColor;\n  kinds?: typeof CounterType;\n} = ({\n  className,\n  // Backward compatibility for props naming\n  wrapperClassName,\n  counterClassName,\n  count = 0,\n  size = Counter.sizes.LARGE,\n  kind = Counter.kinds.FILL,\n  color = Counter.colors.PRIMARY,\n  maxDigits = 3,\n  ariaLabeledBy = \"\",\n  ariaLabel = \"\",\n  id = \"\",\n  prefix = \"\",\n  onMouseDown = NOOP,\n  noAnimation = false,\n  \"data-testid\": dataTestId\n}) => {\n  // Variables\n  const overrideClassName = backwardCompatibilityForProperties([className, wrapperClassName], undefined) as string;\n\n  // State\n  const [countChangeAnimationState, setCountChangeAnimationState] = useState(false);\n\n  // Refs\n  const ref = useRef<HTMLDivElement>(null);\n\n  // Callbacks\n  const setCountChangedAnimationActive = useCallback(() => {\n    setCountChangeAnimationState(true);\n  }, [setCountChangeAnimationState]);\n\n  const setCountChangedAnimationNotActive = useCallback(() => {\n    setCountChangeAnimationState(false);\n  }, [setCountChangeAnimationState]);\n\n  // Listeners\n  useEventListener({\n    eventName: \"animationend\",\n    callback: setCountChangedAnimationNotActive,\n    ref\n  });\n\n  // Custom hooks\n  const isAfterFirstRender = useAfterFirstRender();\n\n  // Effects\n  useEffect(() => {\n    if (!isAfterFirstRender.current) {\n      setCountChangedAnimationActive();\n    }\n  }, [count, isAfterFirstRender, setCountChangedAnimationActive]);\n\n  useEffect(() => {\n    if (maxDigits <= 0) {\n      console.error(\"Max digits must be a positive number\");\n    }\n  }, [maxDigits]);\n\n  // Memos\n  const classNames = useMemo(() => {\n    return cx(\n      styles.counter,\n      getStyle(styles, camelCase(\"size-\" + getActualSize(size))),\n      getStyle(styles, camelCase(\"kind-\" + kind)),\n      getStyle(styles, camelCase(\"color-\" + color)),\n      {\n        [styles.withAnimation]: countChangeAnimationState\n      },\n      counterClassName\n    );\n  }, [size, kind, color, countChangeAnimationState, counterClassName]);\n\n  const counterId = \"counter\" + (id ? `-${id}` : \"\");\n  const countText = count?.toString().length > maxDigits ? `${10 ** maxDigits - 1}+` : String(count);\n  const counter = (\n    <span id={counterId} data-testid={dataTestId || getTestId(ComponentDefaultTestId.COUNTER, id)}>\n      {prefix + countText}\n    </span>\n  );\n\n  return (\n    <span\n      className={overrideClassName}\n      aria-label={`${ariaLabel} ${countText}`}\n      aria-labelledby={ariaLabeledBy}\n      onMouseDown={onMouseDown}\n    >\n      <div className={classNames} aria-label={countText} ref={ref}>\n        {noAnimation ? (\n          counter\n        ) : (\n          <SwitchTransition mode=\"out-in\">\n            <CSSTransition\n              key={countText}\n              classNames={{\n                enter: styles.fadeEnter,\n                enterActive: styles.fadeEnterActive,\n                exit: styles.fadeExit,\n                exitActive: styles.fadeExitActive\n              }}\n              // @ts-expect-error @definitelyTyped typings expecting a single parameter for some reason when the function passed here is called with two parameters\n              // See https://github.com/reactjs/react-transition-group/blob/c89f807067b32eea6f68fd6c622190d88ced82e2/src/Transition.js#L522-L534\n              addEndListener={(node: HTMLElement, done: () => void) => {\n                node.addEventListener(\"transitionend\", done, false);\n              }}\n            >\n              <span id={counterId} data-testid={dataTestId || getTestId(ComponentDefaultTestId.COUNTER, id)}>\n                {prefix + countText}\n              </span>\n            </CSSTransition>\n          </SwitchTransition>\n        )}\n      </div>\n    </span>\n  );\n};\n\nexport default withStaticProps(Counter, {\n  sizes: CounterSize,\n  colors: CounterColor,\n  kinds: CounterType\n});\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}