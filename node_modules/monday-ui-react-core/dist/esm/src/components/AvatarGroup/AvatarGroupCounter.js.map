{"version":3,"file":"AvatarGroupCounter.js","sources":["../../../../../src/components/AvatarGroup/AvatarGroupCounter.tsx"],"sourcesContent":["import React, { ReactElement, useCallback, useRef } from \"react\";\nimport cx from \"classnames\";\nimport Avatar, { AvatarProps } from \"../Avatar/Avatar\";\nimport Counter from \"../Counter/Counter\";\nimport MenuButton from \"../MenuButton/MenuButton\";\nimport Menu from \"../Menu/Menu/Menu\";\nimport AvatarMenuItem from \"../Menu/MenuItem/AvatarMenuItem\";\nimport AvatarGroupCounterTooltipContainer from \"./AvatarGroupCounterTooltipContainer\";\nimport VibeComponentProps from \"../../types/VibeComponentProps\";\nimport { AvatarSize, AvatarType } from \"../Avatar/AvatarConstants\";\nimport { getStyle } from \"../../helpers/typesciptCssModulesHelper\";\nimport { AvatarGroupCounterVisualProps } from \"./AvatarGroup\";\nimport { TooltipProps } from \"../Tooltip/Tooltip\";\nimport { avatarOnClick } from \"./AvatarGroupHelper\";\nimport styles from \"./AvatarGroupCounter.module.scss\";\nimport { AVATAR_GROUP_COUNTER_AVATAR_SIZE } from \"./AvatarGroupConstants\";\n\ninterface AvatarGroupCounterProps extends VibeComponentProps {\n  /**\n   * Array of Avatar elements\n   */\n  counterTooltipAvatars?: ReactElement<AvatarProps>[];\n  /**\n   * AvatarGroupCounterVisualProps: props for counter\n   */\n  counterProps?: AvatarGroupCounterVisualProps;\n  counterTooltipCustomProps?: TooltipProps;\n  counterTooltipIsVirtualizedList?: boolean;\n  size?: AvatarSize;\n  type?: AvatarType;\n  counterAriaLabel?: string;\n}\n\nconst AvatarGroupCounter: React.FC<AvatarGroupCounterProps> = ({\n  counterTooltipAvatars = [],\n  counterProps,\n  counterTooltipCustomProps,\n  counterTooltipIsVirtualizedList = false,\n  size = Avatar.sizes.MEDIUM,\n  type,\n  counterAriaLabel\n}) => {\n  const {\n    color: counterColor = Counter.colors.LIGHT,\n    count: counterValue = counterTooltipAvatars.length,\n    prefix: counterPrefix = \"+\",\n    maxDigits: counterMaxDigits = 3,\n    ariaLabelItemsName: counterAriaLabelItemsName = \"items\"\n  } = counterProps || {};\n\n  const counterSizeStyle = getStyle(styles, size?.toString());\n  const counterColorStyle = styles[counterColor];\n\n  const focusPrevPlaceholderRef = useRef(null);\n  const focusNextPlaceholderRef = useRef(null);\n  const counterContainerRef = useRef(null);\n  const counterComponent = useCallback(() => {\n    return (\n      <Counter\n        color={counterColor}\n        count={counterValue}\n        prefix={counterPrefix}\n        maxDigits={counterMaxDigits}\n        ariaLabel={counterAriaLabel ? counterAriaLabel : `Tab for more ${counterAriaLabelItemsName}`}\n      />\n    );\n  }, [counterAriaLabel, counterAriaLabelItemsName, counterColor, counterMaxDigits, counterPrefix, counterValue]);\n\n  if (!counterTooltipAvatars.length && !counterValue) {\n    return null;\n  }\n\n  const areAvatarsClickable = counterTooltipAvatars.some(a => a.props?.onClick);\n  if (areAvatarsClickable) {\n    return (\n      <MenuButton\n        component={counterComponent}\n        zIndex={1}\n        className={cx(styles.counterContainer, counterSizeStyle, counterColorStyle)}\n        ariaLabel={counterAriaLabel ? counterAriaLabel : `${counterValue} additional ${counterAriaLabelItemsName}`}\n      >\n        <Menu id=\"menu\" size={Menu.sizes.MEDIUM} className={styles.menu} focusItemIndexOnMount={0}>\n          {counterTooltipAvatars.map((avatar, index) => {\n            return (\n              // eslint-disable-next-line react/jsx-key\n              <AvatarMenuItem\n                menuItemProps={{\n                  key: avatar.props?.id || String(index),\n                  title: (avatar.props?.tooltipProps?.content as string) || avatar?.props?.ariaLabel,\n                  onClick: (event: React.MouseEvent | React.KeyboardEvent) => avatarOnClick(event, avatar.props)\n                }}\n                avatarProps={{\n                  ...avatar.props,\n                  customSize: AVATAR_GROUP_COUNTER_AVATAR_SIZE,\n                  ariaLabel: \"\",\n                  tabIndex: -1\n                }}\n              />\n            );\n          })}\n        </Menu>\n      </MenuButton>\n    );\n  }\n\n  return (\n    <AvatarGroupCounterTooltipContainer\n      focusPrevPlaceholderRef={focusPrevPlaceholderRef}\n      focusNextPlaceholderRef={focusNextPlaceholderRef}\n      counterContainerRef={counterContainerRef}\n      avatars={counterTooltipAvatars}\n      counterTooltipCustomProps={counterTooltipCustomProps}\n      counterTooltipIsVirtualizedList={counterTooltipIsVirtualizedList}\n      type={type}\n    >\n      <div tabIndex={-1} ref={focusPrevPlaceholderRef} />\n      {/* eslint-disable jsx-a11y/no-noninteractive-tabindex */}\n      <div\n        tabIndex={0}\n        className={cx(styles.counterContainer, counterSizeStyle, counterColorStyle)}\n        ref={counterContainerRef}\n      >\n        {/* eslint-enable jsx-a11y/no-noninteractive-tabindex */}\n        {counterComponent()}\n        <div tabIndex={-1} ref={focusNextPlaceholderRef} />\n      </div>\n    </AvatarGroupCounterTooltipContainer>\n  );\n};\n\nexport default AvatarGroupCounter;\n"],"names":["AvatarGroupCounter","_ref","_ref$counterTooltipAv","counterTooltipAvatars","counterTooltipCustomProps","_ref$counterTooltipIs","counterTooltipIsVirtualizedList","_ref$size","size","Avatar","sizes","MEDIUM","type","counterAriaLabel","_ref2","counterProps","_ref2$color","color","counterColor","Counter","colors","LIGHT","_ref2$count","count","counterValue","length","_ref2$prefix","prefix","counterPrefix","_ref2$maxDigits","maxDigits","counterMaxDigits","_ref2$ariaLabelItemsN","ariaLabelItemsName","counterAriaLabelItemsName","counterSizeStyle","getStyle","styles","counterColorStyle","focusPrevPlaceholderRef","useRef","focusNextPlaceholderRef","counterContainerRef","counterComponent","useCallback","_jsx","ariaLabel","concat","some","a","_a","props","onClick","MenuButton","Object","assign","component","zIndex","className","cx","counterContainer","children","Menu","id","menu","focusItemIndexOnMount","map","avatar","index","AvatarMenuItem","menuItemProps","key","String","title","_c","_b","tooltipProps","content","_d","event","avatarOnClick","avatarProps","customSize","AVATAR_GROUP_COUNTER_AVATAR_SIZE","tabIndex","_jsxs","AvatarGroupCounterTooltipContainer","avatars","ref"],"mappings":"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"}