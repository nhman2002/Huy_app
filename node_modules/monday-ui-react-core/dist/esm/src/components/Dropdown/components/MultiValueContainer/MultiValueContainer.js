import{objectWithoutProperties as e,slicedToArray as t,defineProperty as n,extends as o}from"../../../../../_virtual/_rollupPluginBabelHelpers.js";import l,{useState as r,useEffect as i,useCallback as a}from"react";import{components as s}from"react-select";import c from"classnames";import{useHiddenOptionsData as m}from"../../hooks/useHiddenOptionsData.js";import u from"../../../Counter/Counter.js";import p from"../../../Dialog/Dialog.js";import d from"../../../DialogContentContainer/DialogContentContainer.js";import h from"../../../Chips/Chips.js";import{DROPDOWN_CHIP_COLORS as f}from"../../DropdownConstants.js";import v from"./MultiValueContainer.module.scss.js";var g=["children","selectProps"];function C(C){var E=C.children,D=C.selectProps,w=e(C,g),b=D.isDisabled,P=D.placeholder,j=D.inputValue,N=D.selectProps,y=void 0===N?{}:N,O=D.withMandatoryDefaultOptions,I=D.readOnly,M=y.selectedOptions,S=y.onSelectedDelete,T=y.isMultiline,k=y.popupsContainerSelector,A=E[1],x=r(),R=t(x,2),V=R[0],B=R[1],L=r(!1),_=t(L,2),F=_[0],H=_[1],K=0===M.length&&!j,W=v["chip-with-input-wrapper"],U=c(T?v["multiselect-chip-multi-line"]:v["multiselect-chip-single-line"],n({},v["multiselect-chip-disabled"],b)),Y=m({isMultiline:T,ref:V,chipClassName:U,chipWrapperClassName:W,selectedOptionsCount:M.length,isCounterShown:F}),q=Y.overflowIndex,z=Y.hiddenOptionsCount;i((function(){H(z>0)}),[z]);var G=a((function(e){S(e.value,{action:"remove-value",removedValue:e})}),[S]),J=a((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:M.length;return M.map((function(n,o){var r=Object.keys(f).includes(n.chipColor)?h.colors[n.chipColor]:h.colors.PRIMARY;return o>=e&&t>o?l.createElement(h,{"data-testid":"value-container-chip",key:n.value,className:c(v.chips,U),noAnimation:!0,disabled:b,id:n.value,label:n.label,onDelete:function(){return G(n)},disableClickableBehavior:!0,onMouseDown:function(e){e.stopPropagation()},readOnly:I||O&&n.isMandatory,allowTextSelection:I,leftRenderer:n.leftRenderer,leftAvatar:n.leftAvatar,leftIcon:n.leftIcon,color:r}):null}))}),[M,U,b,I,O,G]);return l.createElement(s.ValueContainer,o({selectProps:D},w),l.createElement("div",{className:v["value-container"]},K&&l.createElement("div",{className:v["placeholder-container"]},l.createElement(s.Placeholder,w,P)),l.createElement("div",{className:c(v["value-container-chips"],n({},v["without-placeholder"],!K)),ref:function(e){return B(e)},"data-testid":"value-container-chips"},F?l.createElement(l.Fragment,null,J(0,q-1),l.createElement("div",{className:W},J(q-1,q),A),J(q)):l.createElement(l.Fragment,null,J(0,M.length-1),l.createElement("div",{className:W},J(M.length-1),A))),l.createElement("div",null,F&&l.createElement(p,{content:function(){return l.createElement(d,{className:v.valueDialogContent},J(q))},containerSelector:k,tooltip:!0,showTrigger:p.hideShowTriggers.CLICK,hideTrigger:p.hideShowTriggers.CLICK_OUTSIDE,position:"bottom",moveBy:{main:5}},l.createElement(u,{kind:u.kinds.LINE,prefix:"+",count:z,onMouseDown:function(e){e.stopPropagation()},noAnimation:!0})))))}export{C as default};
//# sourceMappingURL=MultiValueContainer.js.map
