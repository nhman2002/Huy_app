import{slicedToArray as o,defineProperty as e}from"../../../_virtual/_rollupPluginBabelHelpers.js";import{jsx as t}from"react/jsx-runtime";import r from"classnames";import{forwardRef as n,useState as i,useRef as a,useCallback as s,useLayoutEffect as u,useEffect as l}from"react";import c from"autosize";import d from"../../hooks/useStyle.js";import m from"../../hooks/useMergeRef.js";import{isTabEvent as f,isEnterEvent as p,isEscapeEvent as v,isArrowUpEvent as E,isArrowDownEvent as T,isArrowLeftEvent as b,isArrowRightEvent as g}from"../../utils/dom-event-utils.js";import{withStaticProps as y}from"../../types/withStaticProps.js";import{InputType as A}from"./EditableInputConstants.js";import{getTestId as h,ComponentDefaultTestId as C}from"../../tests/testIds.js";import I from"./EditableInput.module.scss.js";var j=y(n((function(n,y){var j=n.className,x=n.inputType,P=void 0===x?A.INPUT:x,_=n.autoSize,w=void 0!==_&&_,B=n.id,R=n.tabIndex,D=n.autoComplete,F=void 0===D||D,K=n.disabled,L=void 0!==K&&K,S=n.maxLength,k=n.placeholder,N=void 0===k?"":k,X=n.onClick,z=n.onKeyPress,M=n.shouldFocusOnMount,O=void 0===M||M,H=n.selectOnMount,U=n.value,V=n.customColor,q=n.ignoreBlurClass,W=n.onFinishEditing,G=n.onIgnoreBlurEvent,J=n.onFocus,Q=n.onBlur,Y=n.isValidValue,Z=n.onChange,$=n.onError,oo=n.onSuccess,eo=n.onKeyDown,to=n.onTabHandler,ro=n.onCancelEditing,no=n.textareaSubmitOnEnter,io=void 0!==no&&no,ao=n.onArrowKeyDown,so=n.ariaLabel,uo=n["data-testid"],lo=i(U||""),co=o(lo,2),mo=co[0],fo=co[1],po=a(null),vo=m(y,po),Eo=s((function(){po.current&&w&&P===A.TEXT_AREA&&c(po.current)}),[po,w,P]),To=s((function(){po.current&&requestAnimationFrame((function(){var o;null===(o=po.current)||void 0===o||o.focus()}))}),[po]),bo=s((function(o){J&&J(o)}),[J]),go=s((function(o){if(t=q,(e=o.relatedTarget)&&t&&e.classList.contains(t))G(mo);else{var e,t,r=o;r.origin="blur",W&&W(mo,r),Q&&Q(r)}}),[q,mo,W,Q,G]),yo=s((function(o){var e=o.target.value;!Y||Y(e)?(fo(e),Z&&Z(e),oo&&oo()):$&&$()}),[Y,Z,$,oo]),Ao=s((function(){po.current&&po.current.select()}),[po]),ho=s((function(){po.current&&(po.current.value="",po.current.value=mo)}),[po,mo]),Co=s((function(o){return eo?eo(o,mo):to&&f(o)&&P!==A.TEXT_AREA?(o.preventDefault(),to(mo,o)):(W&&p(o)&&(P!==A.TEXT_AREA||io)&&W(mo,o),ro&&v(o)&&ro(o),void(ao&&(E(o)||T(o)||b(o)||g(o))&&ao(mo,o)))}),[eo,P,mo,to,io,W,ro,ao]);u((function(){O&&To(),Eo(),H?Ao():ho()}),[]),l((function(){fo(U)}),[U]);var Io=d(void 0,{color:V}),jo=P===A.TEXT_AREA&&w?1:void 0;return t(P,{ref:vo,id:B,"data-testid":uo||h(C.EDITABLE_INPUT,B),style:Io,className:r(I.editableInputWrapper,j,e({},I.noResize,w)),onChange:yo,onKeyDown:Co,onBlur:go,onFocus:bo,onClick:X,onKeyPress:z,value:mo,placeholder:N,dir:"auto",tabIndex:R,autoComplete:F?"on":"off",rows:jo,maxLength:S,"aria-label":so,disabled:L})})),{inputTypes:A});export{j as default};
//# sourceMappingURL=EditableInput.js.map
