{"version":3,"file":"useShowHideModal.js","sources":["../../../../../src/components/Modal/useShowHideModal.ts"],"sourcesContent":["import React, { useCallback, useEffect } from \"react\";\nimport useAnimationProps from \"./useAnimationProps\";\nimport useKeyEvent from \"../../hooks/useKeyEvent/index\";\nimport { A11yDialogType } from \"./ModalHelper\";\nimport { keyCodes } from \"../../constants\";\n\nconst KEYS = [keyCodes.ESCAPE];\n\nexport default function useShowHideModal({\n  instance,\n  show,\n  triggerElement,\n  onClose,\n  alertDialog\n}: {\n  instance: A11yDialogType;\n  show: boolean;\n  triggerElement: Element;\n  onClose: () => void;\n  alertDialog: boolean;\n}) {\n  const getAnimationProps = useAnimationProps(triggerElement, instance);\n\n  const closeOnEsc = useCallback(\n    (event: React.KeyboardEvent) => {\n      if (!alertDialog && instance?.$el.contains(document.activeElement)) {\n        event.stopPropagation();\n        onClose?.();\n      }\n    },\n    [alertDialog, instance?.$el, onClose]\n  );\n\n  useKeyEvent({\n    callback: closeOnEsc,\n    capture: true,\n    keys: KEYS\n  });\n\n  // show/hide and animate the modal\n  useEffect(() => {\n    if (!instance) {\n      return;\n    }\n    const animate = instance?.$el.childNodes[1].animate;\n    if (show) {\n      instance?.show();\n      if (animate) instance?.$el.childNodes[1].animate?.(...getAnimationProps());\n    } else {\n      if (animate) {\n        const animation = instance?.$el.childNodes[1]?.animate(...getAnimationProps(true));\n        animation?.finished.then(() => instance?.hide());\n      } else {\n        instance?.hide();\n      }\n    }\n  }, [show, instance, getAnimationProps]);\n}\n"],"names":["KEYS","keyCodes","ESCAPE","useShowHideModal","_ref","instance","show","onClose","alertDialog","getAnimationProps","useAnimationProps","triggerElement","closeOnEsc","useCallback","event","$el","contains","document","activeElement","stopPropagation","useKeyEvent","callback","capture","keys","useEffect","_b2","animate","childNodes","_b","call","apply","_a","concat","_toConsumableArray","_c2","animation","_c","finished","then","hide"],"mappings":"mRAMA,IAAMA,EAAO,CAACC,EAASC,QAEC,SAAAC,EAAgBC,GAYvC,IAXCC,EAAQD,EAARC,SACAC,EAAIF,EAAJE,KAEAC,EAAOH,EAAPG,QACAC,EAAWJ,EAAXI,YAQMC,EAAoBC,EAVZN,EAAdO,eAU4DN,GAEtDO,EAAaC,GACjB,SAACC,IACMN,IAAeH,eAAAA,EAAUU,IAAIC,SAASC,SAASC,kBAClDJ,EAAMK,kBACNZ,SAAAA,IAEH,GACD,CAACC,EAAaH,aAAA,EAAAA,EAAUU,IAAKR,IAG/Ba,EAAY,CACVC,SAAUT,EACVU,SAAS,EACTC,KAAMvB,IAIRwB,GAAU,qBACR,GAAKnB,EAAL,CAGA,IACUoB,EADJC,EAAUrB,aAAA,EAAAA,EAAUU,IAAIY,WAAW,GAAGD,QAC5C,GAAIpB,EACFD,SAAAA,EAAUC,OACNoB,IAA4C,QAAnCE,EAAAvB,kBAAAA,EAAUU,IAAIY,WAAW,IAAGD,eAAO,IAAAE,IAAAH,EAAAG,GAAAC,KAAAC,MAAAL,EAAA,CAAAM,GAAAC,OAAAC,EAAMxB,aAEtD,GAAIiB,EAAS,CAAA,IAAAQ,EACLC,EAAyC,QAA7BC,EAAA/B,aAAA,EAAAA,EAAUU,IAAIY,WAAW,UAAI,IAAAS,OAAA,GAAAF,EAAAE,GAAAV,QAAOI,MAAAI,EAAAD,EAAIxB,GAAkB,KAC5E0B,SAAAA,EAAWE,SAASC,MAAK,WAAA,OAAMjC,aAAQ,EAARA,EAAUkC,SAC1C,MACClC,SAAAA,EAAUkC,MAVb,CAaF,GAAE,CAACjC,EAAMD,EAAUI,GACtB"}