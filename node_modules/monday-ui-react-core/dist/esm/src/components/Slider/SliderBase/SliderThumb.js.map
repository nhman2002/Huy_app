{"version":3,"file":"SliderThumb.js","sources":["../../../../../../src/components/Slider/SliderBase/SliderThumb.tsx"],"sourcesContent":["import React, { FC, useEffect, useRef } from \"react\";\nimport { DialogPosition } from \"../../../constants/positions\";\nimport { NOOP } from \"../../../utils/function-utils\";\nimport Tooltip from \"../../Tooltip/Tooltip\";\nimport { SliderColor, SliderSize, TOOLTIP_SHOW_DELAY } from \"../SliderConstants\";\nimport { useSliderActions, useSliderSelection, useSliderUi } from \"../SliderContext\";\nimport VibeComponentProps from \"../../../types/VibeComponentProps\";\nimport cx from \"classnames\";\nimport styles from \"./SliderThumb.module.scss\";\nimport { getStyle } from \"../../../helpers/typesciptCssModulesHelper\";\n\nconst tooltipPosition = DialogPosition.TOP;\n\nexport interface SliderThumbProps extends VibeComponentProps {\n  /**\n   * Consumer/Custom/Extra `class names` to be added to the Component's-Root-Node\n   */\n  className?: string;\n  /**\n   * Consumer/Custom/Extra `class names` to be added to the Component's-Root-Node\n   */\n  index?: number;\n  /**\n   * On SliderThumb move callback\n   */\n  onMove?: (event: PointerEvent) => void;\n  /**\n   * Position (i.e. offset) from start of track/rail, according to value\n   */\n  position?: number;\n  size: SliderSize;\n  color: SliderColor;\n}\n\nconst SliderThumb: FC<SliderThumbProps> = ({ className, index = 0, onMove = NOOP, position = 0, size, color }) => {\n  const { max, min, ranged, value: valueOrValues, valueText: valueOrValuesText } = useSliderSelection();\n  const value = ranged ? (valueOrValues as unknown as number[])[index] : (valueOrValues as number);\n  const valueText = ranged ? (valueOrValuesText as unknown as string[])[index] : (valueOrValuesText as string);\n  const { active, ariaLabel, ariaLabelledby, disabled, dragging, focused, shapeTestId, showValue } = useSliderUi();\n  const { setActive, setFocused, setDragging } = useSliderActions();\n  const ref = useRef(null);\n\n  function handleBlur() {\n    setFocused(null);\n    setActive(null);\n  }\n\n  function handleFocus() {\n    setFocused(index);\n    setActive(index);\n  }\n\n  function handlePointerLeave() {\n    setActive(null);\n  }\n\n  function handlePointerDown(e: React.PointerEvent) {\n    e.stopPropagation();\n    setDragging(index);\n    document.addEventListener(\"pointermove\", onMove);\n    document.addEventListener(\"pointerup\", stopMove);\n  }\n\n  function stopMove() {\n    setDragging(null);\n    document.removeEventListener(\"pointermove\", onMove);\n    document.removeEventListener(\"pointerup\", stopMove);\n  }\n\n  useEffect(() => {\n    if (focused === index && ref && ref.current) {\n      ref.current.focus();\n    }\n  }, [focused, index]);\n\n  return (\n    <Tooltip\n      open={active === index || dragging === index}\n      content={showValue ? null : valueText}\n      position={tooltipPosition}\n      showDelay={TOOLTIP_SHOW_DELAY}\n    >\n      <div\n        aria-label={ariaLabel}\n        aria-labelledby={ariaLabelledby}\n        aria-valuemax={max}\n        aria-valuemin={min}\n        aria-valuenow={value}\n        aria-valuetext={valueText}\n        aria-disabled={disabled}\n        className={cx(\n          styles.thumb,\n          getStyle(styles, color),\n          getStyle(styles, size),\n          {\n            [styles.dragging]: dragging === index,\n            [styles.focused]: focused,\n            [styles.notDisabledThumb]: !disabled\n          },\n          className\n        )}\n        data-testid={shapeTestId(`thumb-${index}`)}\n        onFocus={handleFocus}\n        onBlur={handleBlur}\n        onPointerDown={handlePointerDown}\n        onPointerLeave={handlePointerLeave}\n        ref={ref}\n        role=\"slider\"\n        style={{ left: `${position}%` }}\n        tabIndex={disabled ? -1 : 0}\n      >\n        {showValue && <label className={styles.label}>{valueText}</label>}\n      </div>\n    </Tooltip>\n  );\n};\n\nexport default SliderThumb;\n"],"names":["tooltipPosition","DialogPosition","TOP","SliderThumb","_ref","className","_ref$index","index","_ref$onMove","onMove","NOOP","_ref$position","position","size","color","_useSliderSelection","useSliderSelection","max","min","ranged","valueOrValues","value","valueOrValuesText","valueText","_useSliderUi","useSliderUi","active","ariaLabel","ariaLabelledby","disabled","dragging","focused","shapeTestId","showValue","_useSliderActions","useSliderActions","setActive","setFocused","setDragging","ref","useRef","stopMove","document","removeEventListener","useEffect","current","focus","_jsx","Tooltip","Object","assign","open","content","showDelay","TOOLTIP_SHOW_DELAY","children","cx","styles","thumb","getStyle","_defineProperty","notDisabledThumb","concat","onFocus","onBlur","onPointerDown","e","stopPropagation","addEventListener","onPointerLeave","role","style","left","tabIndex","label"],"mappings":"onBAWA,IAAMA,EAAkBC,EAAeC,IAuBjCC,EAAoC,SAAzBC,GAAgG,IAApEC,EAASD,EAATC,UAASC,EAAAF,EAAEG,MAAAA,OAAQ,IAAHD,EAAG,EAACA,EAAAE,EAAAJ,EAAEK,OAAAA,OAASC,IAAHF,EAAGE,EAAIF,EAAAG,EAAAP,EAAEQ,SAAAA,OAAW,IAAHD,EAAG,EAACA,EAAEE,EAAIT,EAAJS,KAAMC,EAAKV,EAALU,MACpGC,EAAiFC,IAAzEC,EAAGF,EAAHE,IAAKC,EAAGH,EAAHG,IAAKC,EAAMJ,EAANI,OAAeC,EAAaL,EAApBM,MAAiCC,EAAiBP,EAA5BQ,UAC1CF,EAAQF,EAAUC,EAAsCb,GAAUa,EAClEG,EAAYJ,EAAUG,EAA0Cf,GAAUe,EAChFE,EAAmGC,IAA3FC,EAAMF,EAANE,OAAQC,EAASH,EAATG,UAAWC,EAAcJ,EAAdI,eAAgBC,EAAQL,EAARK,SAAUC,EAAQN,EAARM,SAAUC,EAAOP,EAAPO,QAASC,EAAWR,EAAXQ,YAAaC,EAAST,EAATS,UACrFC,EAA+CC,IAAvCC,EAASF,EAATE,UAAWC,EAAUH,EAAVG,WAAYC,EAAWJ,EAAXI,YACzBC,EAAMC,EAAO,MAuBnB,SAASC,IACPH,EAAY,MACZI,SAASC,oBAAoB,cAAelC,GAC5CiC,SAASC,oBAAoB,YAAaF,EAC5C,CAQA,OANAG,GAAU,WACJb,IAAYxB,GAASgC,GAAOA,EAAIM,SAClCN,EAAIM,QAAQC,OAEhB,GAAG,CAACf,EAASxB,IAGXwC,EAACC,EAAOC,OAAAC,OAAA,CACNC,KAAMzB,IAAWnB,GAASuB,IAAavB,EACvC6C,QAASnB,EAAY,KAAOV,EAC5BX,SAAUZ,EACVqD,UAAWC,GAEX,CAAAC,SAAAR,EAAA,MAAAE,OAAAC,OAAA,CAAA,aACcvB,EAAS,kBACJC,EAAc,gBAChBX,EAAG,gBACHC,EACA,gBAAAG,EACC,iBAAAE,EACD,gBAAAM,EACfxB,UAAWmD,EACTC,EAAOC,MACPC,EAASF,EAAQ3C,GACjB6C,EAASF,EAAQ5C,GAAK+C,EAAAA,EAAAA,EAAA,CAAA,EAEnBH,EAAO3B,SAAWA,IAAavB,GAC/BkD,EAAO1B,QAAUA,GACjB0B,EAAOI,kBAAoBhC,GAE9BxB,GAEW,cAAA2B,EAAW,SAAA8B,OAAUvD,IAClCwD,QAvDN,WACE1B,EAAW9B,GACX6B,EAAU7B,EACZ,EAqDMyD,OA7DN,WACE3B,EAAW,MACXD,EAAU,KACZ,EA2DM6B,cAhDN,SAA2BC,GACzBA,EAAEC,kBACF7B,EAAY/B,GACZmC,SAAS0B,iBAAiB,cAAe3D,GACzCiC,SAAS0B,iBAAiB,YAAa3B,EACzC,EA4CM4B,eArDN,WACEjC,EAAU,KACZ,EAoDMG,IAAKA,EACL+B,KAAK,SACLC,MAAO,CAAEC,KAAI,GAAAV,OAAKlD,EAAQ,MAC1B6D,SAAU5C,GAAY,EAAI,GAEzB,CAAA0B,SAAAtB,GAAac,EAAA,QAAAE,OAAAC,OAAA,CAAO7C,UAAWoD,EAAOiB,iBAAQnD,UAIvD"}