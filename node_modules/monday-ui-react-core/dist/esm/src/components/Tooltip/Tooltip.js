import{inherits as o,createSuper as t,createClass as e,classCallCheck as i,assertThisInitialized as n,defineProperty as s}from"../../../_virtual/_rollupPluginBabelHelpers.js";import{jsx as r}from"react/jsx-runtime";import{isFunction as a,camelCase as l}from"lodash-es";import p from"classnames";import{PureComponent as d,isValidElement as h}from"react";import u from"../Dialog/Dialog.js";import{DialogPosition as m}from"../../constants/positions.js";import{TooltipArrowPosition as T,TooltipTheme as c}from"./TooltipConstants.js";import{getStyle as g}from"../../helpers/typesciptCssModulesHelper.js";import w from"./Tooltip.module.scss.js";import{getTestId as y,ComponentDefaultTestId as f}from"../../tests/testIds.js";import{AnimationType as S,HideShowEvent as D,JustifyType as C}from"../../constants/dialog.js";var v={lastTooltipHideTS:null,openTooltipsCount:0},j=function(m){o(c,d);var T=t(c);function c(o){var t;return i(this,c),(t=T.call(this,o)).renderTooltipContent=t.renderTooltipContent.bind(n(t)),t.getShowDelay=t.getShowDelay.bind(n(t)),t.onTooltipShow=t.onTooltipShow.bind(n(t)),t.onTooltipHide=t.onTooltipHide.bind(n(t)),t.wasShown=!1,t}return e(c,[{key:"getContainer",value:function(){return document.getElementById("tooltips-container")||document.querySelector("body")}},{key:"renderTooltipContent",value:function(){var o,t=this.props,e=t.theme,i=t.content,n=t.paddingSize,d=t.className,u=t.style,m=t.withMaxWidth;return i?(a(i)?o=i():(h(i)||"string"==typeof i&&i)&&(o=i),o?r("div",Object.assign({style:u,className:p(w.tooltip,g(w,l(e)),g(w,l("padding-size-"+n)),s({},w.withMaxWidth,m),d)},{children:o})):null):null}},{key:"onTooltipShow",value:function(){if(!this.wasShown){var o=this.props.onTooltipShow;v.openTooltipsCount++,this.wasShown=!0,o&&o()}}},{key:"onTooltipHide",value:function(){if(this.wasShown){var o=this.props.onTooltipHide;v.lastTooltipHideTS=Date.now(),v.openTooltipsCount--,this.wasShown=!1,o&&o()}}},{key:"getTimeSinceLastTooltip",value:function(){return v.openTooltipsCount>0?0:v.lastTooltipHideTS?Date.now()-v.lastTooltipHideTS:1/0}},{key:"getShowDelay",value:function(){var o=this.props,t=o.showDelay,e=o.immediateShowDelay,i=this.getTimeSinceLastTooltip();return(0===e||e)&&1500>i?{showDelay:e,preventAnimation:!0}:{showDelay:t,preventAnimation:!1}}},{key:"render",value:function(){var o=this.props,t=o.justify,e=o.children,i=o.getContainer,n=o.theme,s=o.paddingSize,a=o.tip,d=o.arrowClassName,h=o.id,m=o["data-testid"];if(!e&&!o.forceRenderWithoutChildren)return null;if(o.withoutDialog)return this.renderTooltipContent();var T=this.renderTooltipContent,c=Object.assign(Object.assign({},this.props),{"data-testid":m||y(f.TOOLTIP,h),startingEdge:t,tooltip:a,content:T,getContainer:i||this.getContainer,tooltipClassName:p(w.arrow,g(w,n),g(w,l("padding-size-"+s)),d),animationType:S.EXPAND,onDialogDidHide:this.onTooltipHide,onDialogDidShow:this.onTooltipShow,getDynamicShowDelay:this.getShowDelay});return r(u,Object.assign({},c,{children:e}))}}]),c}();j.positions=m,j.hideShowTriggers=D,j.themes=c,j.animationTypes=S,j.justifyTypes=C,j.arrowPositions=T,j.defaultProps={arrowPosition:T.CENTER,moveBy:{main:4,secondary:0},theme:c.Dark,position:j.positions.TOP,justify:j.justifyTypes.CENTER,hideDelay:0,showDelay:300,disableDialogSlide:!0,animationType:S.EXPAND,withoutDialog:!1,containerSelector:"#tooltips-container",tip:!0,hideWhenReferenceHidden:!1,modifiers:[],showTrigger:j.hideShowTriggers.MOUSE_ENTER,hideTrigger:j.hideShowTriggers.MOUSE_LEAVE,showOnDialogEnter:!1,referenceWrapperClassName:"",addKeyboardHideShowTriggersByDefault:!1,open:!1};export{j as default};
//# sourceMappingURL=Tooltip.js.map
