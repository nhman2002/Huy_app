import{slicedToArray as e,defineProperty as t}from"../../../_virtual/_rollupPluginBabelHelpers.js";import{jsx as n,jsxs as i,Fragment as a}from"react/jsx-runtime";import{forwardRef as r,useState as o,useCallback as s}from"react";import d from"classnames";import c from"moment";import"react-dates/initialize";import"react-dates/lib/css/_datepicker.css";import{DayPickerRangeController as u,DayPickerSingleDateController as m}from"react-dates";import l from"./DatePickerHeader/DatePickerHeader.js";import f from"./DateNavigationItem/DateNavigationItem.js";import D from"./YearPicker/YearPicker.js";import{WEEK_FIRST_DAY as v,DAY_SIZE as h}from"./constants.js";import{FocusInput as k,Direction as p}from"./types.js";import{getTestId as y}from"../../tests/testIds.js";import{ComponentDefaultTestId as g}from"../../tests/constants.js";import{NOOP as b}from"../../utils/function-utils.js";import P from"./DatePicker.module.scss.js";var j=r((function(r,j){var O=r.id,N=r.className,E=r.firstDayOfWeek,C=void 0===E?v:E,M=r.daySize,I=void 0===M?h:M,S=r.range,W=void 0!==S&&S,Y=r.shouldBlockDay,B=r.shouldBlockYear,K=r.numberOfMonths,R=void 0===K?1:K,x=r.hideNavigationKeys,A=void 0!==x&&x,T=r.date,_=r.endDate,z=r.onPickDate,H=r.enableOutsideDays,w=void 0!==H&&H,F=r.showWeekNumber,V=void 0!==F&&F,L=r.shouldBlockRange,q=r["data-testid"],G=o(k.startDate),J=e(G,2),Q=J[0],U=J[1],X=o(!1),Z=e(X,2),$=Z[0],ee=Z[1],te=o(null),ne=e(te,2),ie=ne[0],ae=ne[1],re=s((function(e){var t=e.month;return n(l,{"data-testid":q||y(g.DATEPICKER_HEADER,O),currentDate:t||c(),isMonthYearSelection:$,onToggleMonthYearPicker:function(){return ee((function(e){return!e}))},hideNavigationKeys:A})}),[q,$,A,O]),oe=s((function(e){var t=0===C?e.clone().add(1,"d").isoWeek():e.isoWeek();return i(a,{children:[n("span",Object.assign({className:P.calendarDayWeekNumber},{children:t}))," ",e.format("D")]})}),[C]),se=s((function(e){ae(e),ee(!1)}),[]),de=s((function(){return n(D,{"data-testid":q||y(g.DATEPICKER_YEAR_SELECTION,O),selectedDate:T,isYearBlocked:B,changeCurrentDate:se})}),[q,B,se,T,O]),ce=s((function(e){z(Q===k.startDate?Object.assign(Object.assign({},e),{endDate:null}):e)}),[Q,z]),ue=s((function(e){U(e||k.startDate)}),[]),me=!A&&!$;return i("div",Object.assign({"data-testid":q||y(g.DATEPICKER,O),ref:j,id:O,className:d(P.datepickerContainer,N,t(t(t({},P.withWeekNumber,V),P.rangePickerMode,W),P.monthYearSelection,$))},{children:[W?n(u,{renderDayContents:V?oe:void 0,firstDayOfWeek:C,hideKeyboardShortcutsPanel:!0,startDate:T,endDate:_,onDatesChange:ce,focusedInput:Q,minimumNights:0,onFocusChange:ue,navPrev:me?n(f,{kind:p.prev}):n("div",{}),navNext:me?n(f,{kind:p.next}):n("div",{}),daySize:I,isOutsideRange:L,isDayBlocked:Y,renderMonthElement:re,enableOutsideDays:w||V,numberOfMonths:R,initialVisibleMonth:function(){return ie||T||c()}},"".concat(null==ie?void 0:""+ie)):n(m,{renderDayContents:V?oe:void 0,firstDayOfWeek:C,hideKeyboardShortcutsPanel:!0,onFocusChange:b,numberOfMonths:R,date:T,onDateChange:function(e){return z(e)},navPrev:me?n(f,{kind:p.prev}):n("div",{}),navNext:me?n(f,{kind:p.next}):n("div",{}),focused:!0,renderMonthElement:re,enableOutsideDays:w||V,daySize:I,isDayBlocked:Y,initialVisibleMonth:function(){return ie||T||c()}},"".concat(null==ie?void 0:""+ie)),$&&de()]}))}));export{j as default};
//# sourceMappingURL=DatePicker.js.map
