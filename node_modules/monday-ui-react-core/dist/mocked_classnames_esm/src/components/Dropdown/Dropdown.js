import{objectSpread2 as e,slicedToArray as n,defineProperty as o,extends as t,toConsumableArray as r}from"../../../_virtual/_rollupPluginBabelHelpers.js";import a,{forwardRef as i,useRef as s,useMemo as l,useState as u,useCallback as c}from"react";import{getTestId as p,ComponentDefaultTestId as d}from"../../tests/testIds.js";import m from"classnames";import{SIZES as f}from"../../constants/sizes.js";import O,{components as C,createFilter as v}from"react-select";import M from"react-select/async";import{noop as g}from"lodash-es";import{WindowedMenuList as y}from"react-windowed-select";import"prop-types";import h from"./components/menu/menu.js";import w from"./components/DropdownIndicator/DropdownIndicator.js";import b from"./components/option/option.js";import S from"./components/singleValue/singleValue.js";import j from"./components/ClearIndicator/ClearIndicator.js";import D from"./components/MultiValueContainer/MultiValueContainer.js";import{ADD_AUTO_HEIGHT_COMPONENTS as I,DROPDOWN_CHIP_COLORS as P,DROPDOWN_MENU_PLACEMENT as V,DROPDOWN_MENU_POSITION as R,defaultCustomStyles as W,DROPDOWN_ID as N}from"./DropdownConstants.js";import E,{customTheme as z}from"./Dropdown.styles.js";import T from"./components/Control/Control.js";import x from"./components/menu/menu.module.scss.js";import A from"./Dropdown.module.scss.js";var F=i((function(i,f){var v=i.className,P=i.optionWrapperClassName,V=i.singleValueWrapperClassName,R=i.dropdownMenuWrapperClassName,W=i.placeholder,N=i.disabled,F=i.readOnly,L=i.onMenuOpen,B=i.onMenuClose,k=i.onFocus,H=i.onBlur,K=i.onChange,U=i.searchable,_=i.options,q=i.defaultValue,G=i.value,J=i.noOptionsMessage,Q=i.openMenuOnFocus,X=i.openMenuOnClick,Y=i.clearable,Z=i.OptionRenderer,$=i.optionRenderer,ee=i.ValueRenderer,ne=i.valueRenderer,oe=i.menuRenderer,te=i.menuPlacement,re=i.rtl,ae=i.size,ie=i.asyncOptions,se=i.cacheOptions,le=i.defaultOptions,ue=i.isVirtualized,ce=i.menuPortalTarget,pe=i.extraStyles,de=i.maxMenuHeight,me=i.menuIsOpen,fe=i.tabIndex,Oe=i.id,Ce=i.autoFocus,ve=i.multi,Me=void 0!==ve&&ve,ge=i.multiline,ye=void 0!==ge&&ge,he=i.onOptionRemove,we=i.onOptionSelect,be=i.onClear,Se=i.onInputChange,je=i.closeMenuOnSelect,De=void 0===je?!Me:je,Ie=i.closeMenuOnScroll,Pe=i.withMandatoryDefaultOptions,Ve=i.isOptionSelected,Re=i.insideOverflowContainer,We=i.insideOverflowWithTransformContainer,Ne=i.tooltipContent,Ee=i.onKeyDown,ze=i.isLoading,Te=i.loadingMessage,xe=i.ariaLabel,Ae=i.tabSelectsValue,Fe=void 0===Ae||Ae,Le=i.popupsContainerSelector,Be=i.filterOption,ke=i.menuPosition,He=i["data-testid"],Ke=s(),Ue=ce||Le&&document.querySelector(Le),_e=l((function(){return q?Array.isArray(q)?q.map((function(n){return e(e({},n),{},{isMandatory:!0})})):e(e({},q),{},{isMandatory:!0}):q}),[q]),qe=u(_e||[]),Ge=n(qe,2),Je=Ge[1],Qe=$||Z,Xe=ne||ee,Ye=!!G,Ze=null!=G?G:Ge[0],$e=l((function(){return Array.isArray(Ze)?Ze.reduce((function(n,t){return e(e({},n),{},o({},t.value,t))}),{}):{}}),[Ze]),en=l((function(){return xe||"".concat(F?"Readonly ":""," ").concat(Ne," ").concat(Array.isArray(Ze)?"Selected: ".concat(Ze.map((function(e){return e.label})).join(", ")):"Select")}),[xe,F,Ze,Ne]),nn=Me?Ze:G,on=l((function(){var t=E({size:ae,rtl:re,insideOverflowContainer:Re,controlRef:Ke,insideOverflowWithTransformContainer:We}),r=pe(t),a=Object.entries(r).reduce((function(r,a){var i=n(a,2),s=i[0],l=i[1];return e(e({},r),{},o({},s,(function(e,n){var o=t[s]?t[s](e,n):e;return l(o,n)})))}),{});if(Me){ye&&I.forEach((function(n){var o=a[n];a[n]=function(n,t){return e(e({},o(n,t)),{},{height:"auto"})}}));var i=a.valueContainer;a.valueContainer=function(n,o){return e(e({},i(n,o)),{},{paddingLeft:6})}}return a}),[ae,re,Re,We,pe,Me,ye]),tn=c((function(e){return a.createElement(h,t({},e,{Renderer:oe,dropdownMenuWrapperClassName:R}))}),[R,oe]),rn=c((function(e){return a.createElement(w,t({},e,{size:ae}))}),[ae]),an=c((function(e){return a.createElement(b,t({},e,{Renderer:Qe,optionWrapperClassName:P}))}),[Qe,P]),sn=c((function(e){return a.createElement(C.Input,t({},e,{"aria-label":"Dropdown input"}))}),[]),ln=c((function(e){return a.createElement(S,t({},e,{readOnly:F,Renderer:Xe,selectedOption:Ze[0],singleValueWrapperClassName:V}))}),[Xe,F,Ze,V]),un=c((function(e){return a.createElement(j,t({},e,{size:ae}))}),[ae]),cn=l((function(){return function(e,n){he&&he($e[e]);var o=Ze.filter((function(n){return n.value!==e}));K&&K(o,n),Je(o)}}),[K,he,Ze,$e]),pn=l((function(){return{selectedOptions:Ze,onSelectedDelete:cn,isMultiline:ye,insideOverflowContainer:Re,insideOverflowWithTransformContainer:We,controlRef:Ke,tooltipContent:Ne,popupsContainerSelector:Le}}),[Ze,cn,ye,Re,We,Ne,Le]),dn=ie?M:O,mn=e({},ie&&e({loadOptions:ie,cacheOptions:se},le&&{defaultOptions:le})),fn=e(e({},!ie&&{options:_}),Me&&{isMulti:!0}),On=c((function(e){var n,o=e.target;return(null==o||null===(n=o.parentElement)||void 0===n||!n.classList.contains(x.dropdownMenuWrapper))&&(Ie||Re||We)}),[Re,We,Ie]);return a.createElement(dn,t({className:m(A.dropdown,v),selectProps:pn,components:e(e({DropdownIndicator:rn,Menu:tn,ClearIndicator:un,Input:sn,Option:an,Control:T,SingleValue:ln},Me&&{MultiValue:g,ValueContainer:D}),ue&&{MenuList:y}),closeMenuOnScroll:On,size:ae,noOptionsMessage:J,placeholder:W,isDisabled:N,isClearable:!F&&Y,isSearchable:!F&&U,readOnly:F,"aria-readonly":F,"aria-label":en,"aria-details":Ne,defaultValue:q,value:nn,onMenuOpen:L,onMenuClose:B,onFocus:k,onBlur:H,onChange:function(e,n){switch(K&&K(e,n),n.action){case"select-option":var o=Me?n.option:e;we&&we(o),Ye||Je([].concat(r(Ze),[o]));break;case"clear":be&&be(),Ye||Je(Pe?_e:[])}},onKeyDown:Ee,onInputChange:Se,openMenuOnFocus:Q,openMenuOnClick:X,isRtl:re,styles:on,theme:z,maxMenuHeight:de,menuPortalTarget:Ue,menuPlacement:te,menuPosition:ke,menuIsOpen:!F&&me,tabIndex:fe,id:Oe,"data-testid":He||p(d.DROPDOWN,Oe),autoFocus:Ce,closeMenuOnSelect:De,ref:f,withMandatoryDefaultOptions:Pe,isOptionSelected:Ve,isLoading:ze,loadingMessage:Te,tabSelectsValue:Fe,filterOption:Be},mn,fn))}));Object.assign(F,{size:f,sizes:f,chipColors:P,menuPlacements:V,menuPositions:R,createFilter:v}),F.defaultProps={className:"",optionWrapperClassName:void 0,dropdownMenuWrapperClassName:void 0,singleValueWrapperClassName:void 0,placeholder:"",onMenuOpen:g,onMenuClose:g,onKeyDown:g,onFocus:g,onBlur:g,onChange:g,onInputChange:g,searchable:!0,options:[],menuPlacement:F.menuPlacements.BOTTOM,menuPosition:F.menuPositions.ABSOLUTE,noOptionsMessage:g,clearable:!0,size:f.MEDIUM,extraStyles:W,tabIndex:"0",onOptionRemove:void 0,id:N,autoFocus:!1,closeMenuOnSelect:void 0,closeMenuOnScroll:!1,ref:void 0,withMandatoryDefaultOptions:!1,insideOverflowContainer:!1,insideOverflowWithTransformContainer:!1,tooltipContent:"",disabled:!1,readOnly:!1,isLoading:!1,loadingMessage:void 0,ariaLabel:void 0,filterOption:void 0};var L=F;export{L as default};
//# sourceMappingURL=Dropdown.js.map
