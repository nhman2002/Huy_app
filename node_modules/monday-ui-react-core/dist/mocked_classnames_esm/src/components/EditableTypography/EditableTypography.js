import{slicedToArray as e,defineProperty as n}from"../../../_virtual/_rollupPluginBabelHelpers.js";import{jsxs as o,jsx as t}from"react/jsx-runtime";import{forwardRef as r,useRef as a,useState as i,useEffect as l,useLayoutEffect as s}from"react";import u from"classnames";import d from"../../hooks/useMergeRef.js";import c from"./EditableTypography.module.scss.js";import{useKeyboardButtonPressedFunc as p}from"../../hooks/useKeyboardButtonPressedFunc.js";import{keyCodes as f}from"../../constants/keyCodes.js";var m=r((function(r,m){var y=r.id,h=r.className,g=r["data-testid"],v=r.value,b=r.onChange,C=r.onClick,j=r.readOnly,k=void 0!==j&&j,E=r.ariaLabel,N=void 0===E?"":E,P=r.placeholder,w=r.typographyClassName,B=r.component,T=r.isEditMode,x=r.onEditModeChange,D=r.tooltipProps,K=a(null),M=d(m,K),O=i(T||!1),R=e(O,2),A=R[0],_=R[1],F=i(v),H=e(F,2),I=H[0],L=H[1],S=i(0),q=e(S,2),z=q[0],G=q[1],J=a(null),Q=a(null);function U(e){k||A||(e.preventDefault(),_(!0))}function V(e){null==x||x(e),_(e)}function W(){V(!1),I&&v!==I?null==b||b(I):L(v)}l((function(){_(T)}),[T]);var X=p(U);return l((function(){var e;A&&J.current&&(null===(e=J.current)||void 0===e||e.focus())}),[A]),s((function(){if(Q.current){var e=Q.current.getBoundingClientRect();G(e.width)}}),[I,A]),o("div",Object.assign({ref:M,id:y,"aria-label":N,"data-testid":g,className:u(c.editableTypography,h),role:A?null:"button",onClick:function(e){null==C||C(e),U(e)},onKeyDown:X},{children:[A&&t("input",{ref:J,className:u(c.input,w),value:I,onChange:function(e){L(e.target.value)},onKeyDown:function(e){e.key===f.ENTER&&W(),e.key===f.ESCAPE&&(V(!1),L(v))},onBlur:function(){W()},"aria-label":N,placeholder:P,style:{width:z},role:"input"}),t(B,Object.assign({ref:Q,"aria-hidden":A,className:u(c.typography,w,n(n({},c.hidden,A),c.disabled,k)),tabIndex:0,tooltipProps:D},{children:I||P}))]}))}));export{m as default};
//# sourceMappingURL=EditableTypography.js.map
