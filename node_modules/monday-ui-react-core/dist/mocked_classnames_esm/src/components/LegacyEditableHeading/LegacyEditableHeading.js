import{slicedToArray as e,defineProperty as o}from"../../../_virtual/_rollupPluginBabelHelpers.js";import{jsx as i}from"react/jsx-runtime";import{camelCase as t}from"lodash-es";import{getStyle as n}from"../../helpers/typesciptCssModulesHelper.js";import{getTestId as s,ComponentDefaultTestId as a}from"../../tests/testIds.js";import r from"classnames";import{useState as l,useRef as u,useCallback as d,useEffect as c,useLayoutEffect as p}from"react";import m from"../LegacyHeading/LegacyHeading.js";import g from"../Clickable/Clickable.js";import f from"../EditableInput/EditableInput.js";import h from"../../hooks/usePrevious/index.js";import{InputType as y}from"../EditableInput/EditableInputConstants.js";import{HeadingTypes as v,HeadingSizes as b}from"../LegacyHeading/LegacyHeadingConstants.js";import{withStaticProps as C}from"../../types/withStaticProps.js";import E from"../LegacyHeading/LegacyHeading.module.scss.js";import j from"./LegacyEditableHeading.module.scss.js";import{backwardCompatibilityForProperties as L}from"../../helpers/backwardCompatibilityForProperties.js";var T=C((function(v){var C=v.id,T=void 0===C?"":C,H=v.className,O=v.inputClassName,x=void 0===O?"":O,I=v.dataTestId,P=v["data-testid"],A=v.value,F=v.editing,M=v.disabled,w=v.onFinishEditing,B=v.onCancelEditing,k=v.onIgnoreBlurEvent,N=v.errorClassTimeout,S=void 0===N?2e3:N,z=v.style,D=v.customColor,K=v.onStartEditing,V=v.contentRenderer,_=v.tooltip,R=v.autoSize,G=void 0===R||R,W=v.highlightTerm,X=void 0===W?null:W,q=v.insetFocus,J=void 0!==q&&q,Q=v.size,U=void 0===Q?b.LARGE:Q,Y=v.displayPlaceholderInTextMode,Z=void 0===Y||Y,$=v.suggestEditOnHover,ee=void 0===$||$,oe=v.type,ie=void 0===oe?m.types.h1:oe,te=L([void 0===P?"":P,void 0===I?"":I]),ne=l(F&&!M),se=e(ne,2),ae=se[0],re=se[1],le=l(!1),ue=e(le,2),de=ue[0],ce=ue[1],pe=l(A||""),me=e(pe,2),ge=me[0],fe=me[1],he=h(A),ye=u(null),ve=d((function(e){M||ae||(re(!0),K&&K(e))}),[ae,M,re,K]),be=d((function(e,o){re(!1),fe(e),null==w||w(e,o)}),[w,re,fe]),Ce=d((function(e){re(!1),null==B||B(e)}),[B,re]),Ee=d((function(e){null==k||k(e)}),[k]),je=d((function(){ce(!1)}),[ce]),Le=d((function(){ce(!0)}),[ce]),Te=d((function(){je()}),[je]);c((function(){F||A===he||A===ge||fe(A)}),[F,A,he,ge,fe]),c((function(){re(F)}),[F]),p((function(){F||ge||!A||fe(A)}),[F,A,he,ge,fe]),c((function(){var e;return de&&(e=setTimeout(je,S)),function(){return e&&clearTimeout(e)}}),[de,ce,je,S]);var He,Oe,xe,Ie=!M&&ae;return i("div",Object.assign({ref:ye,style:z,className:r(j.editableHeadingWrapper,H,o({},j.insetFocus,J)),"aria-label":"".concat(A," ").concat(_||""),id:T,"data-testid":te||s(a.EDITABLE_HEADING,T)},{children:i(g,Object.assign({role:Ie?"button":"input",onClick:ve,disabled:M},{children:Ie?(Oe=v.inputType||(v.ellipsisMaxLines>1?y.TEXT_AREA:void 0),xe={value:ge,className:r(n(E,t("element-type-"+ie)),n(E,t("size-"+U)),x),isValidValue:v.isValidValue,onChange:v.onChange,onKeyDown:v.onKeyDown,onKeyPress:v.onKeyPress,onClick:v.onClick,customColor:D,onTabHandler:v.onTabHandler,onArrowKeyDown:v.onArrowKeyDown,autoComplete:v.autoComplete,maxLength:v.maxLength,placeholder:v.placeholder,shouldFocusOnMount:v.shouldFocusOnMount,selectOnMount:v.selectOnMount,onBlur:v.onBlur,onFocus:v.onFocus,inputType:Oe,ignoreBlurClass:v.ignoreBlurClass,autoSize:G,textareaSubmitOnEnter:v.textareaSubmitOnEnter,onFinishEditing:be,onCancelEditing:Ce,onIgnoreBlurEvent:Ee,onError:Le,onSuccess:Te,ariaLabel:v.inputAriaLabel},i(f,Object.assign({},xe))):(He={value:Z?ge||v.placeholder||"":ge,type:ie,customColor:D,suggestEditOnHover:ee&&!M,tooltipPosition:v.tooltipPosition,ellipsisMaxLines:v.ellipsisMaxLines,nonEllipsisTooltip:v.tooltip,size:U,highlightTerm:X,className:r(j.headingComponent,v.headingClassName)},V?V(He):i(m,Object.assign({},He)))}))}))}),{types:v,sizes:b});export{T as default};
//# sourceMappingURL=LegacyEditableHeading.js.map
