import{slicedToArray as e,toConsumableArray as t,defineProperty as i}from"../../../../../_virtual/_rollupPluginBabelHelpers.js";import{jsxs as n,jsx as o,Fragment as s}from"react/jsx-runtime";import{camelCase as a}from"lodash-es";import{getStyle as r}from"../../../../helpers/typesciptCssModulesHelper.js";import{getTestId as c,ComponentDefaultTestId as l}from"../../../../tests/testIds.js";import d from"classnames";import{keyCodes as p}from"../../../../constants/keyCodes.js";import{useState as m,useRef as u,useCallback as f,useEffect as v,useMemo as b}from"react";import{SwitchTransition as _,CSSTransition as y}from"react-transition-group";import j from"../../../../hooks/useEventListener/index.js";import x from"../../../../hooks/useKeyEvent/index.js";import N from"../../../Icon/Icon.js";import I from"../../../Icon/Icons/components/Check.js";import C from"../../../Divider/Divider.js";import{NOOP as h}from"../../../../utils/function-utils.js";import S from"../../../HiddenText/HiddenText.js";import E from"../../../Clickable/Clickable.js";import{StepStatus as T,MultiStepType as g,Size as k}from"../../MultiStepConstants.js";import A from"./StepIndicator.module.scss.js";import{IconType as O}from"../../../Icon/IconConstants.js";var D=[p.ENTER,p.SPACE],L=function(e){var t=e.fulfilledStepIcon,i=e.fulfilledStepIconType;return e.status!==T.FULFILLED||e.isFulfilledStepDisplayNumber?o(s,{children:e.stepNumber}):o(N,{icon:t,className:d(A.numberContainerTextCheckIcon),iconLabel:T.FULFILLED,iconType:i,ignoreFocusStyle:!0,clickable:!1,ariaHidden:!0})},F=function(s){var p=s.stepComponentClassName,N=s.stepNumber,F=void 0===N?1:N,P=s.status,w=void 0===P?T.PENDING:P,H=s.titleText,R=void 0===H?"Heading text":H,M=s.subtitleText,G=void 0===M?"Subtitle text":M,U=s.type,V=void 0===U?g.PRIMARY:U,z=s.fulfilledStepIcon,B=void 0===z?I:z,K=s.fulfilledStepIconType,Y=void 0===K?O.SVG:K,q=s.isFulfilledStepDisplayNumber,J=void 0!==q&&q,Q=s.onClick,W=void 0===Q?h:Q,X=s.isFollowedByDivider,Z=void 0!==X&&X,$=s.stepDividerClassName,ee=s.isVertical,te=void 0!==ee&&ee,ie=s.id,ne=s.size,oe=void 0===ne?k.REGULAR:ne,se=s["data-testid"],ae=m(!1),re=e(ae,2),ce=re[0],le=re[1],de=u(null),pe=u(w),me=f((function(){le(!0)}),[le]),ue=f((function(){le(!1)}),[le]),fe=f((function(){return pe.current!==w}),[pe,w]),ve=f((function(){W&&W(F)}),[W,F]);j({eventName:"animationend",callback:ue,ref:de}),x({keys:D,callback:ve,ref:de}),v((function(){fe()&&me()}),[w,fe,me]),v((function(){pe.current=w}),[w]);var be=b((function(){return"Step ".concat(F,": ").concat(R," - ").concat(G,", status: ").concat(w)}),[w,R,F,G]),_e=function(e){return[r(A,a(e||"indicator")),r(A,a("type-".concat(V).concat(e))),r(A,a("status-".concat(w).concat(e))),r(A,a("size-".concat(oe).concat(e)))]};return n(E,Object.assign({tabIndex:"-1",elementType:"li",className:d.apply(void 0,t(_e("")).concat([p,i(i(i({},A.withAnimation,ce),A.clickable,W),A.textPlacementVertical,te)])),"aria-label":be,onClick:ve,"data-testid":se||c(l.STEP_INDICATOR,ie)},{children:[n("div",Object.assign({className:d.apply(void 0,t(_e("__number-divider-container")))},{children:[o("div",Object.assign({className:d.apply(void 0,t(_e("__number-container"))),ref:de,tabIndex:0,role:"button"},{children:o(_,Object.assign({mode:"out-in"},{children:o(y,Object.assign({classNames:{enter:A.swapEnter,enterActive:A.swapEnterActive,exit:A.swapExit,exitActive:A.swapExitActive},addEndListener:function(e,t){e.addEventListener("transitionend",t,!1)}},{children:o("span",Object.assign({className:d.apply(void 0,t(_e("__number-container__text")))},{children:o(L,{fulfilledStepIcon:B,fulfilledStepIconType:Y,isFulfilledStepDisplayNumber:J,stepNumber:F,status:w})}))}),w)}))})),Z&&te&&o(C,{className:d(A.divider,$)})]})),n("div",Object.assign({className:d.apply(void 0,t(_e("__text-container")))},{children:[n("div",Object.assign({className:d.apply(void 0,t(_e("__text-container__title")))},{children:[o(S,{text:w})," ",o("span",Object.assign({className:d.apply(void 0,t(_e("__text-container__title__text")))},{children:R}))]})),oe!==k.COMPACT?o("span",Object.assign({className:d.apply(void 0,t(_e("__text-container__subtitle__text")))},{children:G})):null]}))]}))};export{F as default};
//# sourceMappingURL=StepIndicator.js.map
