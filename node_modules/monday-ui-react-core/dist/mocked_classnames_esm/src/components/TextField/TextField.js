import{defineProperty as e}from"../../../_virtual/_rollupPluginBabelHelpers.js";import{jsx as i,jsxs as o}from"react/jsx-runtime";import a from"classnames";import{forwardRef as n,useRef as t,useCallback as r,useMemo as s,useEffect as l}from"react";import c from"../../hooks/useDebounceEvent/index.js";import d from"../Icon/Icon.js";import{backwardCompatibilityForProperties as u}from"../../helpers/backwardCompatibilityForProperties.js";import m from"../Loader/Loader.js";import p from"../Text/Text.js";import v from"../FieldLabel/FieldLabel.js";import{TextFieldFeedbackState as b,TextFieldTextType as f,FEEDBACK_CLASSES as C,SIZE_MAPPER as h,getActualSize as y,TextFieldAriaLabel as j}from"./TextFieldConstants.js";import{BASE_SIZES as N}from"../../constants/sizes.js";import g from"../../hooks/useMergeRef.js";import x from"../Clickable/Clickable.js";import{getTestId as T}from"../../tests/testIds.js";import{NOOP as I}from"../../utils/function-utils.js";import{ComponentDefaultTestId as O}from"../../tests/constants.js";import{withStaticProps as F}from"../../types/withStaticProps.js";import L from"./TextField.module.scss.js";var k={primary:"",secondary:"",layout:""},A=n((function(n,b){var N=n.className,F=void 0===N?"":N,S=n.placeholder,E=void 0===S?"":S,D=n.autoComplete,z=void 0===D?"off":D,_=n.value,w=n.onChange,R=void 0===w?I:w,H=n.onBlur,q=void 0===H?I:H,B=n.onFocus,M=void 0===B?I:B,P=n.onKeyDown,W=void 0===P?I:P,X=n.onWheel,V=void 0===X?I:X,K=n.debounceRate,U=void 0===K?0:K,Y=n.autoFocus,G=void 0!==Y&&Y,J=n.disabled,Q=void 0!==J&&J,Z=n.readonly,$=void 0!==Z&&Z,ee=n.setRef,ie=void 0===ee?I:ee,oe=n.iconName,ae=n.secondaryIconName,ne=n.id,te=void 0===ne?"input":ne,re=n.title,se=void 0===re?"":re,le=n.size,ce=void 0===le?A.sizes.SMALL:le,de=n.validation,ue=void 0===de?null:de,me=n.wrapperClassName,pe=void 0===me?"":me,ve=n.onIconClick,be=void 0===ve?I:ve,fe=n.clearOnIconClick,Ce=void 0!==fe&&fe,he=n.labelIconName,ye=n.showCharCount,je=void 0!==ye&&ye,Ne=n.inputAriaLabel,ge=n.searchResultsContainerId,xe=void 0===ge?"":ge,Te=n.activeDescendant,Ie=void 0===Te?"":Te,Oe=n.iconsNames,Fe=void 0===Oe?k:Oe,Le=n.type,ke=void 0===Le?f.TEXT:Le,Ae=n.maxLength,Se=void 0===Ae?null:Ae,Ee=n.trim,De=void 0!==Ee&&Ee,ze=n.role,_e=void 0===ze?"":ze,we=n.required,Re=void 0!==we&&we,He=n.loading,qe=void 0!==He&&He,Be=n.requiredAsterisk,Me=void 0!==Be&&Be,Pe=n.secondaryDataTestId,We=n.tabIndex,Xe=n.underline,Ve=void 0!==Xe&&Xe,Ke=n.name,Ue=u([n["data-testid"],n.dataTestId],T(O.TEXT_FIELD,te)),Ye=t(null),Ge=g(b,Ye,ie),Je=r((function(e){R(e,{target:Ye.current})}),[R]),Qe=c({delay:U,onChange:Je,initialStateValue:_,trim:De}),Ze=Qe.inputValue,$e=Qe.onEventChanged,ei=Qe.clearValue,ii=s((function(){return ae&&Ze?ae:oe}),[oe,ae,Ze]),oi=r((function(){Q||(Ce&&(Ye.current&&Ye.current.focus(),Ye.current.value="",ei()),be(ii))}),[Ye,Q,Ce,be,ii,ei]),ai=s((function(){return ue&&ue.status?C[ue.status]:""}),[ue]),ni=oe||ae,ti=je||ue&&ue.text,ri=ae===ii,si=oe===ii,li=ae&&ri&&!!Ze;l((function(){if(Ye.current&&G){var e=requestAnimationFrame((function(){return Ye.current.focus()}));return function(){return cancelAnimationFrame(e)}}}),[Ye,G]);var ci=be!==I||Ce;return i("div",Object.assign({className:a(L.textField,pe,e(e({},L.disabled,Q),L.onlyUnderline,Ve)),role:_e,"aria-busy":qe},{children:o("div",Object.assign({className:a(L.labelWrapper)},{children:[i(v,{labelText:se,icon:he,iconLabel:Fe.layout,labelFor:te,requiredAsterisk:Me}),o("div",Object.assign({className:a(L.inputWrapper,h[y(ce)],ai)},{children:[i("input",{className:a(F,L.input,e({},L.inputHasIcon,!!ni)),placeholder:E,autoComplete:z,value:Ze,onChange:$e,disabled:Q,readOnly:$,ref:Ge,type:ke,id:te,"data-testid":Ue,name:Ke,onBlur:q,onFocus:M,onKeyDown:W,onWheel:V,maxLength:Se,role:xe&&"combobox","aria-label":Ne||E,"aria-invalid":ue&&"error"===ue.status,"aria-owns":xe,"aria-activedescendant":Ie,required:Re,tabIndex:We}),qe&&i("div",Object.assign({className:a(L.loaderContainer,e({},L.loaderContainerHasIcon,ni))},{children:i("div",Object.assign({className:a(L.loader)},{children:i(m,{svgClassName:a(L.loaderSvg)})}))})),i(x,Object.assign({className:a(L.iconContainer,e(e(e({},L.iconContainerHasIcon,ni),L.iconContainerActive,si),L.iconContainerClickable,ci)),onClick:oi,tabIndex:be!==I&&Ze&&oe.length&&si?"0":"-1"},{children:i(d,{icon:oe,className:a(L.icon),clickable:!1,iconLabel:Fe.primary,iconType:d.type.ICON_FONT,ignoreFocusStyle:!0,iconSize:ce===A.sizes.SMALL?"16px":"18px"})})),i(x,Object.assign({className:a(L.iconContainer,e(e(e({},L.iconContainerHasIcon,ni),L.iconContainerActive,ri),L.iconContainerClickable,ci)),onClick:oi,tabIndex:li?"0":"-1","data-testid":Pe||T(O.TEXT_FIELD_SECONDARY_BUTTON,te)},{children:i(d,{icon:ae,className:a(L.icon),clickable:!1,iconLabel:Fe.secondary,iconType:d.type.ICON_FONT,ignoreFocusStyle:!0,iconSize:ce===A.sizes.SMALL?"16px":"18px"})}))]})),ti&&o(p,Object.assign({type:p.types.TEXT2,color:p.colors.SECONDARY,className:a(L.subTextContainer)},{children:[ue&&ue.text&&i("span",Object.assign({className:a(L.subTextContainerStatus)},{children:ue.text})),je&&i("span",Object.assign({className:a(L.counter),"aria-label":j.CHAR},{children:Ze&&Ze.length||0}))]}))]}))}))})),S=F(A,{sizes:N,feedbacks:b,types:f});export{S as default};
//# sourceMappingURL=TextField.js.map
