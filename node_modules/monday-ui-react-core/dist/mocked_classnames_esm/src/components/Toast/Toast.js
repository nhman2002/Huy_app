import{__rest as t}from"../../../_virtual/_tslib.js";import{jsx as o,jsxs as e}from"react/jsx-runtime";import{camelCase as i}from"lodash-es";import{getTestId as n,ComponentDefaultTestId as s}from"../../tests/testIds.js";import r from"classnames";import{useMemo as a,useCallback as c,useRef as l,useEffect as m}from"react";import{CSSTransition as u}from"react-transition-group";import p from"../Button/Button.js";import d from"../Text/Text.js";import f from"../Loader/Loader.js";import T from"../Flex/Flex.js";import j from"../Icon/Icons/components/CloseSmall.js";import v from"./ToastLink/ToastLink.js";import N from"./ToastButton/ToastButton.js";import{ToastType as O,ToastActionType as g}from"./ToastConstants.js";import{getIcon as L}from"./ToastHelpers.js";import{NOOP as h}from"../../utils/function-utils.js";import{getStyle as I}from"../../helpers/typesciptCssModulesHelper.js";import{withStaticProps as b}from"../../types/withStaticProps.js";import y from"./Toast.module.scss.js";import A from"../IconButton/IconButton.js";var B=b((function(b){var B=b.open,E=void 0!==B&&B,x=b.loading,C=void 0!==x&&x,S=b.autoHideDuration,_=void 0===S?null:S,k=b.type,H=void 0===k?O.NORMAL:k,M=b.icon,R=b.hideIcon,z=void 0!==R&&R,D=b.action,F=b.actions,X=b.children,G=b.closeable,U=void 0===G||G,w=b.onClose,K=void 0===w?h:w,P=b.className,Y=b.id,q=b.closeButtonAriaLabel,J=void 0===q?"Close":q,Q=b["data-testid"],V=a((function(){return F?F.filter((function(t){return t.type===g.LINK})).map((function(e){var i=t(e,["type"]);return o(v,Object.assign({className:y.actionLink},i),i.href)})):null}),[F]),W=a((function(){return F?F.filter((function(t){return t.type===g.BUTTON})).map((function(e,i){var n=e.content,s=t(e,["type","content"]);return o(N,Object.assign({className:y.actionButton},s,{children:n}),"alert-button-".concat(i))})):null}),[F]),Z=a((function(){return r(y.toast,I(y,i("type-"+H)),P)}),[H,P]),$=c((function(){K&&K()}),[K]),tt=l(),ot=c((function(t){K&&null!=t&&(clearTimeout(tt.current),tt.current=setTimeout((function(){$()}),t))}),[$,K]);m((function(){return E&&_>0&&ot(_),function(){clearTimeout(tt.current)}}),[E,_,ot]);var et=!z&&L(H,M);return o(u,Object.assign({in:E,classNames:{enterActive:y.enterActive,exitActive:y.exitActive},timeout:400,unmountOnExit:!0},{children:e(d,Object.assign({id:Y,"data-testid":Q||n(s.TOAST,Y),type:d.types.TEXT2,element:"div",color:d.colors.FIXED_LIGHT,className:Z,role:"alert","aria-live":"polite"},{children:[et&&o("div",Object.assign({className:r(y.icon)},{children:et})),e(T,Object.assign({align:T.align.CENTER,gap:T.gaps.LARGE,className:y.content},{children:[e(T,Object.assign({gap:T.gaps.MEDIUM,"data-testid":n(s.TOAST_CONTENT),className:y.textContent},{children:[o("span",{children:X}),V]})),(W||D)&&(W||D),C&&o(f,{size:f.sizes.XS})]})),U&&o(A,{className:r(y.closeButton),onClick:$,size:p.sizes.SMALL,kind:p.kinds.TERTIARY,color:p.colors.FIXED_LIGHT,ariaLabel:J,"data-testid":n(s.TOAST_CLOSE_BUTTON),icon:j,hideTooltip:!0})]}))}))}),{types:O,actionTypes:g});export{B as default};
//# sourceMappingURL=Toast.js.map
